
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raw Wealthy Investment Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* ALL YOUR EXISTING CSS CODE REMAINS EXACTLY THE SAME */
        /* Your existing CSS remains unchanged */
        :root {
            --primary: #0f172a;
            --secondary: #1e293b;
            --accent-gold: #fbbf24;
            --accent-emerald: #10b981;
            --text-light: #f8fafc;
            --text-muted: #94a3b8;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
            --radius: 10px;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
        }
        
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
        }
        
        /* Your existing CSS remains unchanged */
        /* ... (all existing CSS) ... */
        /* Your existing CSS remains unchanged */
        /* ... (all existing CSS) ... */
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
        }
        
        body {
        background-color: var(--primary);
        color: var(--text-light);
        line-height: 1.6;
        overflow-x: hidden;
        transition: var(--transition);
        }
        
        body.light-mode {
        --primary: #f8fafc;
        --secondary: #e2e8f0;
        --text-light: #0f172a;
        --text-muted: #64748b;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        background-color: var(--primary);
        color: var(--text-light);
        }
        
        /* Loading Spinner */
        .loading-spinner {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(15, 23, 42, 0.9);
        z-index: 9999;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        }
        
        .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(251, 191, 36, 0.3);
        border-radius: 50%;
        border-top-color: var(--accent-gold);
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
        }
        
        @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
        }
        
        /* Toast Notifications */
        .toast-container {
        position: fixed;
        top: 100px;
        right: 20px;
        z-index: 9998;
        max-width: 350px;
        }
        
        .toast {
        padding: 1rem 1.5rem;
        margin-bottom: 1rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        animation: slideInRight 0.3s, slideOutRight 0.5s 2.5s;
        animation-fill-mode: forwards;
        opacity: 0;
        transform: translateX(100%);
        }
        
        .toast.success {
        background: var(--success);
        color: white;
        }
        
        .toast.error {
        background: var(--error);
        color: white;
        }
        
        .toast.warning {
        background: var(--warning);
        color: white;
        }
        
        .toast.info {
        background: var(--info);
        color: white;
        }
        
        .toast i {
        margin-right: 0.5rem;
        font-size: 1.2rem;
        }
        
        @keyframes slideInRight {
        from {
        opacity: 0;
        transform: translateX(100%);
        }
        to {
        opacity: 1;
        transform: translateX(0);
        }
        }
        
        @keyframes slideOutRight {
        from {
        opacity: 1;
        transform: translateX(0);
        }
        to {
        opacity: 0;
        transform: translateX(100%);
        }
        }
        
        /* Navbar */
        .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 5%;
        background-color: rgba(15, 23, 42, 0.95);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: var(--shadow);
        transition: var(--transition);
        }
        
        .light-mode .navbar {
        background-color: rgba(248, 250, 252, 0.95);
        }
        
        .navbar.scrolled {
        padding: 1rem 5%;
        background-color: rgba(15, 23, 42, 0.98);
        }
        
        .light-mode .navbar.scrolled {
        background-color: rgba(248, 250, 252, 0.98);
        }
        
        .logo {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .logo i {
        color: var(--accent-emerald);
        }
        
        .nav-links {
        display: flex;
        gap: 2rem;
        }
        
        .nav-links a {
        text-decoration: none;
        color: var(--text-light);
        font-weight: 500;
        transition: var(--transition);
        position: relative;
        }
        
        .light-mode .nav-links a {
        color: var(--text-light);
        }
        
        .nav-links a:hover {
        color: var(--accent-gold);
        }
        
        .nav-links a::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: var(--accent-gold);
        transition: var(--transition);
        }
        
        .nav-links a:hover::after {
        width: 100%;
        }
        
        .nav-buttons {
        display: flex;
        gap: 1rem;
        align-items: center;
        }
        
        .btn {
        padding: 0.7rem 1.5rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        border: none;
        outline: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        }
        
        .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        }
        
        .btn-outline {
        background: transparent;
        border: 1px solid var(--accent-emerald);
        color: var(--accent-emerald);
        }
        
        .btn-outline:hover:not(:disabled) {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .light-mode .btn-outline:hover:not(:disabled) {
        color: var(--text-light);
        }
        
        .btn-primary {
        background: linear-gradient(135deg, var(--accent-gold), #f59e0b);
        color: var(--primary);
        }
        
        .btn-primary:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(251, 191, 36, 0.3);
        }
        
        .theme-toggle {
        background: transparent;
        border: none;
        color: var(--text-light);
        font-size: 1.2rem;
        cursor: pointer;
        transition: var(--transition);
        padding: 0.5rem;
        border-radius: 50%;
        }
        
        .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .theme-toggle {
        color: var(--text-light);
        }
        
        .hamburger {
        display: none;
        cursor: pointer;
        font-size: 1.5rem;
        }
        
        /* Mobile Menu */
        .mobile-menu {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background: var(--primary);
        z-index: 1001;
        padding: 2rem;
        transition: var(--transition);
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 2rem;
        }
        
        .light-mode .mobile-menu {
        background: var(--primary);
        }
        
        .mobile-menu.active {
        right: 0;
        }
        
        .mobile-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        }
        
        .mobile-menu-links {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        }
        
        .mobile-menu-links a {
        color: var(--text-light);
        text-decoration: none;
        font-size: 1.1rem;
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        transition: var(--transition);
        }
        
        .light-mode .mobile-menu-links a {
        color: var(--text-light);
        }
        
        .mobile-menu-links a:hover {
        color: var(--accent-gold);
        padding-left: 0.5rem;
        }
        
        .mobile-menu-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: auto;
        }
        
        .mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        display: none;
        }
        
        .mobile-menu-overlay.active {
        display: block;
        }
        
        /* Hero Section */
        .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding: 0 5%;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.8)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        background-size: cover;
        background-position: center;
        position: relative;
        overflow: hidden;
        }
        
        .light-mode .hero {
        background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(226, 232, 240, 0.8)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        }
        
        .hero-content {
        max-width: 600px;
        z-index: 1;
        }
        
        .hero h1 {
        font-size: 3.5rem;
        margin-bottom: 1.5rem;
        line-height: 1.2;
        }
        
        .hero p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        color: var(--text-muted);
        }
        
        .hero-buttons {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        }
        
        .hero-stats {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
        }
        
        .stat {
        display: flex;
        flex-direction: column;
        }
        
        .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .stat-label {
        font-size: 0.9rem;
        color: var(--text-muted);
        }
        
        .hero-visual {
        position: absolute;
        right: 5%;
        bottom: 10%;
        width: 500px;
        height: 400px;
        background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
        border-radius: 20px;
        opacity: 0.1;
        transform: rotate(10deg);
        animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
        0% { transform: translateY(0px) rotate(10deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
        100% { transform: translateY(0px) rotate(10deg); }
        }
        
        /* About Section */
        .section {
        padding: 5rem 5%;
        }
        
        .section-title {
        text-align: center;
        margin-bottom: 3rem;
        }
        
        .section-title h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
        }
        
        .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--accent-gold);
        border-radius: 2px;
        }
        
        .section-title p {
        color: var(--text-muted);
        max-width: 600px;
        margin: 0 auto;
        }
        
        .about-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 3rem;
        align-items: center;
        }
        
        .about-text h3 {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
        }
        
        .about-features {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-top: 2rem;
        }
        
        .feature {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        transition: var(--transition);
        padding: 1rem;
        border-radius: var(--radius);
        }
        
        .feature:hover {
        background: var(--secondary);
        transform: translateY(-5px);
        }
        
        .light-mode .feature:hover {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .feature-icon {
        width: 50px;
        height: 50px;
        background: var(--secondary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent-gold);
        font-size: 1.2rem;
        flex-shrink: 0;
        }
        
        .light-mode .feature-icon {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .feature-content h4 {
        margin-bottom: 0.5rem;
        }
        
        .feature-content p {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .about-image {
        position: relative;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transform: perspective(1000px) rotateY(-5deg);
        transition: var(--transition);
        }
        
        .about-image:hover {
        transform: perspective(1000px) rotateY(0deg);
        }
        
        .about-image img {
        width: 100%;
        height: auto;
        display: block;
        }
        
        /* Plans Section */
        .plans {
        background-color: var(--secondary);
        }
        
        .light-mode .plans {
        background-color: rgba(30, 41, 59, 0.1);
        }
        
        .plans-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
        }
        
        .plan-card {
        background: var(--primary);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(251, 191, 36, 0.1);
        display: flex;
        flex-direction: column;
        }
        
        .light-mode .plan-card {
        background: white;
        }
        
        .plan-card:hover {
        transform: translateY(-10px);
        border-color: var(--accent-gold);
        }
        
        .plan-badge {
        position: absolute;
        top: 20px;
        right: -30px;
        background: var(--accent-emerald);
        color: var(--primary);
        padding: 5px 30px;
        transform: rotate(45deg);
        font-size: 0.8rem;
        font-weight: 600;
        }
        
        .plan-header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .plan-header {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .plan-name {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        }
        
        .plan-price {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .plan-period {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .plan-features {
        margin-bottom: 2rem;
        flex-grow: 1;
        }
        
        .plan-feature {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 1rem;
        }
        
        .plan-feature i {
        color: var(--accent-emerald);
        }
        
        .plan-button {
        width: 100%;
        padding: 1rem;
        text-align: center;
        margin-top: auto;
        }
        
        /* How It Works */
        .steps {
        display: flex;
        justify-content: space-between;
        margin-top: 3rem;
        position: relative;
        }
        
        .steps::before {
        content: '';
        position: absolute;
        top: 50px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        max-width: 250px;
        position: relative;
        z-index: 1;
        background: var(--secondary);
        padding: 2rem 1.5rem;
        border-radius: var(--radius);
        transition: var(--transition);
        }
        
        .light-mode .step {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .step:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow);
        }
        
        .step-number {
        width: 60px;
        height: 60px;
        background: var(--accent-gold);
        color: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        }
        
        .step-title {
        font-size: 1.2rem;
        margin-bottom: 1rem;
        }
        
        .step-description {
        color: var(--text-muted);
        }
        
        /* Testimonials */
        .testimonials {
        background-color: var(--secondary);
        }
        
        .light-mode .testimonials {
        background-color: rgba(30, 41, 59, 0.1);
        }
        
        .testimonials-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
        }
        
        .testimonial-card {
        background: var(--primary);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        }
        
        .light-mode .testimonial-card {
        background: white;
        }
        
        .testimonial-card:hover {
        transform: translateY(-5px);
        }
        
        .testimonial-content {
        margin-bottom: 1.5rem;
        font-style: italic;
        position: relative;
        }
        
        .testimonial-content::before {
        content: '"';
        font-size: 4rem;
        color: var(--accent-gold);
        position: absolute;
        top: -20px;
        left: -10px;
        opacity: 0.3;
        line-height: 1;
        }
        
        .testimonial-author {
        display: flex;
        align-items: center;
        gap: 1rem;
        }
        
        .author-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid var(--accent-gold);
        }
        
        .author-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        }
        
        .author-info h4 {
        margin-bottom: 0.2rem;
        }
        
        .author-info p {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        /* Footer */
        footer {
        background-color: #0a0f1c;
        padding: 4rem 5% 2rem;
        }
        
        .light-mode footer {
        background-color: #e2e8f0;
        }
        
        .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
        }
        
        .footer-column h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
        }
        
        .footer-column h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--accent-gold);
        }
        
        .footer-links {
        list-style: none;
        }
        
        .footer-links li {
        margin-bottom: 0.8rem;
        }
        
        .footer-links a {
        color: var(--text-muted);
        text-decoration: none;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        }
        
        .footer-links a:hover {
        color: var(--accent-gold);
        padding-left: 5px;
        }
        
        .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
        }
        
        .social-links a {
        width: 40px;
        height: 40px;
        background: var(--secondary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-light);
        transition: var(--transition);
        }
        
        .light-mode .social-links a {
        background: rgba(30, 41, 59, 0.1);
        color: var(--text-light);
        }
        
        .social-links a:hover {
        background: var(--accent-gold);
        color: var(--primary);
        transform: translateY(-3px);
        }
        
        .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .light-mode .footer-bottom {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        /* Registration Page */
        .registration-page, .login-page, .dashboard-page, .investment-plans-page, .profile-page, .kyc-page, .investment-history-page, .transaction-history-page, .referral-page, .support-page, .admin-page {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 5%;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        background-size: cover;
        background-position: center;
        }
        
        .light-mode .registration-page, 
        .light-mode .login-page, 
        .light-mode .dashboard-page, 
        .light-mode .investment-plans-page,
        .light-mode .profile-page,
        .light-mode .kyc-page,
        .light-mode .investment-history-page,
        .light-mode .transaction-history-page,
        .light-mode .referral-page,
        .light-mode .support-page,
        .light-mode .admin-page {
        background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(226, 232, 240, 0.9)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        }
        
        .registration-container, .login-container, .dashboard-container, .investment-plans-container, .profile-container, .kyc-container, .investment-history-container, .transaction-history-container, .referral-container, .support-container, .admin-container {
        display: flex;
        max-width: 1000px;
        width: 100%;
        background: var(--primary);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow);
        }
        
        .light-mode .registration-container, 
        .light-mode .login-container, 
        .light-mode .dashboard-container, 
        .light-mode .investment-plans-container,
        .light-mode .profile-container,
        .light-mode .kyc-container,
        .light-mode .investment-history-container,
        .light-mode .transaction-history-container,
        .light-mode .referral-container,
        .light-mode .support-container,
        .light-mode .admin-container {
        background: white;
        }
        
        .registration-info, .login-info {
        flex: 1;
        padding: 3rem;
        background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
        color: var(--primary);
        display: flex;
        flex-direction: column;
        justify-content: center;
        }
        
        .registration-info h2, .login-info h2 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        }
        
        .registration-info p, .login-info p {
        margin-bottom: 2rem;
        }
        
        .info-features {
        list-style: none;
        }
        
        .info-features li {
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
        }
        
        .info-features i {
        font-size: 1.2rem;
        }
        
        .registration-form, .login-form {
        flex: 1;
        padding: 3rem;
        }
        
        .form-header, .login-form-header {
        text-align: center;
        margin-bottom: 2rem;
        }
        
        .form-header h2, .login-form-header h2 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        }
        
        .form-header p, .login-form-header p {
        color: var(--text-muted);
        }
        
        .form-group {
        margin-bottom: 1.5rem;
        position: relative;
        }
        
        .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        }
        
        .form-control {
        width: 100%;
        padding: 1rem;
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: var(--text-light);
        font-size: 1rem;
        transition: var(--transition);
        }
        
        .light-mode .form-control {
        background: rgba(30, 41, 59, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: var(--text-light);
        }
        
        .form-control:focus {
        border-color: var(--accent-emerald);
        outline: none;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        
        .password-strength {
        height: 4px;
        margin-top: 0.5rem;
        border-radius: 2px;
        transition: var(--transition);
        }
        
        .password-strength.weak {
        background: var(--error);
        width: 25%;
        }
        
        .password-strength.medium {
        background: var(--warning);
        width: 50%;
        }
        
        .password-strength.strong {
        background: var(--success);
        width: 100%;
        }
        
        .password-toggle {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        }
        
        .form-footer, .login-form-footer {
        margin-top: 2rem;
        text-align: center;
        }
        
        .form-footer p, .login-form-footer p {
        color: var(--text-muted);
        margin-top: 1rem;
        }
        
        .form-footer a, .login-form-footer a {
        color: var(--accent-gold);
        text-decoration: none;
        }
        
        .forgot-password {
        display: block;
        text-align: right;
        margin-top: 0.5rem;
        color: var(--accent-emerald);
        text-decoration: none;
        font-size: 0.9rem;
        }
        
        .forgot-password:hover {
        text-decoration: underline;
        }
        
        /* Dashboard Page */
        .dashboard-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .dashboard-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .dashboard-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .dashboard-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
        }
        
        .user-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--accent-emerald);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-weight: bold;
        border: 2px solid var(--accent-gold);
        }
        
        .dashboard-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        padding: 2rem;
        }
        
        .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-bottom: 2rem;
        }
        
        .stat-card {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        transition: var(--transition);
        }
        
        .light-mode .stat-card {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .stat-card:hover {
        transform: translateY(-5px);
        }
        
        .stat-card h3 {
        font-size: 1rem;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
        }
        
        .stat-card .value {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .chart-container {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        }
        
        .light-mode .chart-container {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .chart-container h3 {
        margin-bottom: 1rem;
        }
        
        .investments-list, .transactions-list {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .investments-list, .light-mode .transactions-list {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investments-list h3, .transactions-list h3 {
        margin-bottom: 1rem;
        }
        
        .investment-item, .transaction-item {
        display: flex;
        justify-content: space-between;
        padding: 1rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        transition: var(--transition);
        }
        
        .light-mode .investment-item, .light-mode .transaction-item {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .investment-item:hover, .transaction-item:hover {
        background: rgba(255, 255, 255, 0.05);
        padding-left: 0.5rem;
        padding-right: 0.5rem;
        border-radius: 5px;
        }
        
        .light-mode .investment-item:hover, .light-mode .transaction-item:hover {
        background: rgba(0, 0, 0, 0.05);
        }
        
        .investment-item:last-child, .transaction-item:last-child {
        border-bottom: none;
        }
        
        .investment-name, .transaction-type {
        font-weight: 500;
        }
        
        .investment-amount, .transaction-amount {
        color: var(--accent-gold);
        font-weight: 600;
        }
        
        .investment-status, .transaction-date {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .quick-actions {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        }
        
        .action-card {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        text-align: center;
        transition: var(--transition);
        cursor: pointer;
        }
        
        .light-mode .action-card {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .action-card:hover {
        transform: translateY(-5px);
        background: rgba(30, 41, 59, 0.8);
        }
        
        .light-mode .action-card:hover {
        background: rgba(30, 41, 59, 0.2);
        }
        
        .action-card i {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: var(--accent-emerald);
        }
        
        /* Investment Plans Page */
        .investment-plans-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .investment-plans-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .investment-plans-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investment-plans-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .investment-plans-content {
        padding: 2rem;
        }
        
        /* Profile Page */
        .profile-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .profile-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .light-mode .profile-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .profile-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 2rem;
        padding: 2rem;
        }
        
        .profile-sidebar {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .profile-sidebar {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-nav {
        list-style: none;
        }
        
        .profile-nav li {
        margin-bottom: 1rem;
        }
        
        .profile-nav a {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem 1rem;
        color: var(--text-light);
        text-decoration: none;
        border-radius: 8px;
        transition: var(--transition);
        }
        
        .light-mode .profile-nav a {
        color: var(--text-light);
        }
        
        .profile-nav a:hover, .profile-nav a.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .profile-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .profile-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-section {
        margin-bottom: 2rem;
        }
        
        .profile-section h2 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .profile-section h2 {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .two-factor-setup {
        background: rgba(16, 185, 129, 0.1);
        padding: 1.5rem;
        border-radius: 10px;
        margin-top: 1rem;
        }
        
        .two-factor-code {
        display: flex;
        gap: 1rem;
        margin: 1rem 0;
        }
        
        .two-factor-code input {
        width: 40px;
        height: 40px;
        text-align: center;
        font-size: 1.2rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        background: var(--primary);
        color: var(--text-light);
        }
        
        .light-mode .two-factor-code input {
        background: white;
        color: var(--text-light);
        }
        
        /* KYC Page */
        .kyc-container {
        max-width: 800px;
        flex-direction: column;
        padding: 0;
        }
        
        .kyc-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .kyc-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .kyc-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .kyc-content {
        padding: 2rem;
        }
        
        .kyc-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        position: relative;
        }
        
        .kyc-steps::before {
        content: '';
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .kyc-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
        }
        
        .kyc-step-number {
        width: 40px;
        height: 40px;
        background: var(--secondary);
        color: var(--text-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        margin-bottom: 0.5rem;
        border: 2px solid var(--accent-emerald);
        }
        
        .kyc-step.active .kyc-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .kyc-step.completed .kyc-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .kyc-step-label {
        font-size: 0.9rem;
        color: var(--text-muted);
        }
        
        .kyc-step.active .kyc-step-label {
        color: var(--accent-emerald);
        font-weight: 600;
        }
        
        .kyc-form-section {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        }
        
        .light-mode .kyc-form-section {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .file-upload {
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .light-mode .file-upload {
        border: 2px dashed rgba(0, 0, 0, 0.2);
        }
        
        .file-upload:hover {
        border-color: var(--accent-emerald);
        }
        
        .file-upload i {
        font-size: 3rem;
        color: var(--accent-emerald);
        margin-bottom: 1rem;
        }
        
        /* Investment History Page */
        .investment-history-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .investment-history-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .investment-history-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investment-history-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .investment-history-content {
        padding: 2rem;
        }
        
        .filters {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        }
        
        .filter-select {
        padding: 0.7rem 1rem;
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        color: var(--text-light);
        min-width: 150px;
        }
        
        .light-mode .filter-select {
        background: rgba(30, 41, 59, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: var(--text-light);
        }
        
        /* Transaction History Page */
        .transaction-history-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .transaction-history-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .transaction-history-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .transaction-history-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .transaction-history-content {
        padding: 2rem;
        }
        
        /* Referral Page */
        .referral-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .referral-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .referral-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .referral-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .referral-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        }
        
        .referral-stats {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .referral-stats {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .referral-stat {
        display: flex;
        justify-content: space-between;
        padding: 1rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .referral-stat {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .referral-stat:last-child {
        border-bottom: none;
        }
        
        .referral-links {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .referral-links {
        background: rgba(30, 41, 59, 0.1);
        }
        
        /* Support Page */
        .support-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .support-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .support-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .support-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .support-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 2rem;
        }
        
        .support-categories {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .support-categories {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .support-category {
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .support-category:hover, .support-category.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .support-category i {
        margin-right: 0.5rem;
        }
        
        .support-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .support-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .faq-item {
        margin-bottom: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 1.5rem;
        }
        
        .light-mode .faq-item {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .faq-question {
        font-weight: 600;
        margin-bottom: 0.5rem;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .faq-answer {
        color: var(--text-muted);
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        }
        
        .faq-item.active .faq-answer {
        max-height: 500px;
        }
        
        /* Admin Page */
        .admin-container {
        max-width: 1400px;
        flex-direction: column;
        padding: 0;
        }
        
        .admin-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .light-mode .admin-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .admin-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
        }
        
        .admin-sidebar {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .admin-sidebar {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-nav {
        list-style: none;
        }
        
        .admin-nav li {
        margin-bottom: 1rem;
        }
        
        .admin-nav a {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem 1rem;
        color: var(--text-light);
        text-decoration: none;
        border-radius: 8px;
        transition: var(--transition);
        }
        
        .light-mode .admin-nav a {
        color: var(--text-light);
        }
        
        .admin-nav a:hover, .admin-nav a.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .admin-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .admin-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
        margin-bottom: 2rem;
        }
        
        .admin-stat {
        background: var(--primary);
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        transition: var(--transition);
        }
        
        .light-mode .admin-stat {
        background: white;
        }
        
        .admin-stat:hover {
        transform: translateY(-5px);
        }
        
        .admin-stat .value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-gold);
        display: block;
        }
        
        .admin-stat .label {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .admin-table {
        width: 100%;
        border-collapse: collapse;
        }
        
        .admin-table th, .admin-table td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .admin-table th, .light-mode .admin-table td {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .admin-table th {
        color: var(--text-muted);
        font-weight: 600;
        }
        
        .status-badge {
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        }
        
        .status-badge.pending {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        }
        
        .status-badge.approved {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        }
        
        .status-badge.rejected {
        background: rgba(239, 68, 68, 0.2);
        color: var(--error);
        }
        
        /* Modal */
        .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        }
        
        .modal-content {
        background: var(--primary);
        padding: 2rem;
        border-radius: 15px;
        max-width: 500px;
        width: 100%;
        box-shadow: var(--shadow);
        max-height: 90vh;
        overflow-y: auto;
        animation: modalAppear 0.3s ease;
        }
        
        .light-mode .modal-content {
        background: white;
        }
        
        @keyframes modalAppear {
        from {
        opacity: 0;
        transform: scale(0.9);
        }
        to {
        opacity: 1;
        transform: scale(1);
        }
        }
        
        .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        }
        
        .modal-header h2 {
        font-size: 1.5rem;
        color: var(--accent-gold);
        }
        
        .close-modal {
        background: none;
        border: none;
        color: var(--text-light);
        font-size: 1.5rem;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .close-modal:hover {
        color: var(--accent-gold);
        }
        
        /* Password Reset Modal */
        .password-reset-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        position: relative;
        }
        
        .password-reset-steps::before {
        content: '';
        position: absolute;
        top: 15px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .password-reset-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
        }
        
        .password-reset-step-number {
        width: 30px;
        height: 30px;
        background: var(--secondary);
        color: var(--text-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        margin-bottom: 0.5rem;
        border: 2px solid var(--accent-emerald);
        font-size: 0.8rem;
        }
        
        .password-reset-step.active .password-reset-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .password-reset-step.completed .password-reset-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .password-reset-step-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        }
        
        .password-reset-step.active .password-reset-step-label {
        color: var(--accent-emerald);
        font-weight: 600;
        }
        
        /* Back to Top Button */
        .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: var(--accent-gold);
        color: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        cursor: pointer;
        transition: var(--transition);
        opacity: 0;
        visibility: hidden;
        z-index: 999;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .back-to-top.visible {
        opacity: 1;
        visibility: visible;
        }
        
        .back-to-top:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        
        /* File Upload Styles */
        .file-upload-container {
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        transition: var(--transition);
        cursor: pointer;
        margin-bottom: 1rem;
        }
        
        .light-mode .file-upload-container {
        border: 2px dashed rgba(0, 0, 0, 0.2);
        }
        
        .file-upload-container:hover {
        border-color: var(--accent-emerald);
        }
        
        .file-upload-container i {
        font-size: 3rem;
        color: var(--accent-emerald);
        margin-bottom: 1rem;
        }
        
        .file-preview {
        max-width: 100%;
        max-height: 200px;
        margin-top: 1rem;
        border-radius: 5px;
        display: none;
        }
        
        /* Currency Toggle */
        .currency-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        }
        
        .currency-toggle label {
        font-weight: 500;
        }
        
        .currency-toggle select {
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        color: var(--text-light);
        padding: 0.5rem;
        }
        
        /* Withdrawal Fee Notice */
        .withdrawal-fee-notice {
        background: rgba(245, 158, 11, 0.1);
        border: 1px solid rgba(245, 158, 11, 0.3);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        color: var(--warning);
        font-size: 0.9rem;
        }
        
        .withdrawal-fee-notice i {
        margin-right: 0.5rem;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
        .admin-content {
        grid-template-columns: 1fr;
        }
        
        .admin-sidebar {
        order: 2;
        }
        
        .admin-main {
        order: 1;
        }
        
        .admin-stats {
        grid-template-columns: repeat(2, 1fr);
        }
        }
        
        @media (max-width: 992px) {
        .hero h1 {
        font-size: 2.8rem;
        }
        
        .steps {
        flex-direction: column;
        gap: 3rem;
        }
        
        .steps::before {
        display: none;
        }
        
        .registration-container, .login-container {
        flex-direction: column;
        }
        
        .dashboard-content {
        grid-template-columns: 1fr;
        }
        
        .profile-content {
        grid-template-columns: 1fr;
        }
        
        .referral-content {
        grid-template-columns: 1fr;
        }
        
        .support-content {
        grid-template-columns: 1fr;
        }
        
        .about-content {
        grid-template-columns: 1fr;
        }
        }
        
        @media (max-width: 768px) {
        .navbar {
        padding: 1rem 5%;
        }
        
        .nav-links, .nav-buttons {
        display: none;
        }
        
        .hamburger {
        display: block;
        }
        
        .hero h1 {
        font-size: 2.2rem;
        }
        
        .hero-buttons {
        flex-direction: column;
        }
        
        .hero-stats {
        flex-direction: column;
        gap: 1rem;
        }
        
        .about-features {
        grid-template-columns: 1fr;
        }
        
        .stats-grid {
        grid-template-columns: 1fr;
        }
        
        .admin-stats {
        grid-template-columns: 1fr;
        }
        
        .kyc-steps {
        flex-direction: column;
        gap: 2rem;
        }
        
        .kyc-steps::before {
        display: none;
        }
        
        .password-reset-steps {
        flex-direction: column;
        gap: 1.5rem;
        }
        
        .password-reset-steps::before {
        display: none;
        }
        }
        
        @media (max-width: 576px) {
        .section {
        padding: 3rem 5%;
        }
        
        .plans-container, .testimonials-container {
        grid-template-columns: 1fr;
        }
        
        .registration-info, .registration-form, .login-info, .login-form {
        padding: 2rem;
        }
        
        .dashboard-header, .investment-plans-header, .profile-header, .kyc-header, .investment-history-header, .transaction-history-header, .referral-header, .support-header, .admin-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        }
        
        .filters {
        flex-direction: column;
        }
        
        .filter-select {
        min-width: 100%;
        }
        
        .two-factor-code {
        justify-content: center;
        }
        }
        /* Only the existing CSS is preserved - no new CSS added */
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
        <p>Processing your request...</p>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <div class="logo">
                <i class="fas fa-industry"></i>
                <span>Raw Wealthy</span>
            </div>
            <button class="close-modal" id="close-mobile-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-menu-links">
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">Home</a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">About</a>
            <a href="#" onclick="app.showPage('investment-plans'); app.closeMobileMenu();">Raw Materials</a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">How It Works</a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">Testimonials</a>
        </div>
        <div class="mobile-menu-buttons">
            <button class="btn btn-outline" onclick="app.showPage('login'); app.closeMobileMenu();">Login</button>
            <button class="btn btn-primary" onclick="app.showPage('register'); app.closeMobileMenu();">Register</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo">
                <i class="fas fa-industry"></i>
                <span>Raw Wealthy</span>
            </div>
            <div class="nav-links">
                <a href="#" onclick="app.showPage('home')">Home</a>
                <a href="#" onclick="app.showPage('home')">About</a>
                <a href="#" onclick="app.showPage('investment-plans')">Raw Materials</a>
                <a href="#" onclick="app.showPage('home')">How It Works</a>
                <a href="#" onclick="app.showPage('home')">Testimonials</a>
            </div>
            <div class="nav-buttons">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn btn-outline" onclick="app.showPage('login')">Login</button>
                <button class="btn btn-primary" onclick="app.showPage('register')">Register</button>
            </div>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-content">
                <h1>Invest in Raw Materials. <span style="color: var(--accent-gold);">Earn Daily.</span></h1>
                <p>Join thousands of investors who are growing their wealth with our secure raw materials investment platform. Start with as little as 3,500 and watch your money grow.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="app.showPage('register')">Get Started</button>
                    <button class="btn btn-outline" onclick="app.showPage('investment-plans')">Investment Plans</button>
                </div>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value">2.5B+</span>
                        <span class="stat-label">Total Invested</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">15,240+</span>
                        <span class="stat-label">Active Investors</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">4.9/5</span>
                        <span class="stat-label">User Rating</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual"></div>
        </section>

        <!-- About Section -->
        <section class="section" id="about">
            <div class="section-title">
                <h2>Why Choose Raw Wealthy?</h2>
                <p>We provide a secure and transparent platform for investing in raw materials with industry-leading returns.</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3>Your Trusted Partner in Raw Materials Investment</h3>
                    <p>With over 7 years of experience in the raw materials industry, we've helped thousands of clients achieve their financial goals through carefully curated investment plans.</p>
                    <p>Our platform uses advanced security measures and follows strict compliance protocols to ensure your investments are safe and secure.</p>
                    <div class="about-features">
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Secure Investments</h4>
                                <p>Bank-level security for all transactions</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="feature-content">
                                <h4>High Returns</h4>
                                <p>Industry-leading ROI on all plans</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="feature-content">
                                <h4>24/7 Support</h4>
                                <p>Round-the-clock customer service</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Verified Platform</h4>
                                <p>Fully licensed and regulated</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Investment Growth">
                </div>
            </div>
        </section>

        <!-- Raw Materials Plans Section -->
        <section class="section plans" id="plans">
            <div class="section-title">
                <h2>Raw Materials Investment Plans</h2>
                <p>Choose from our carefully curated raw materials investment plans designed to maximize your returns.</p>
            </div>
            <div class="plans-container" id="plans-container">
                <!-- Plans will be dynamically loaded here -->
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="section" id="how-it-works">
            <div class="section-title">
                <h2>How It Works</h2>
                <p>Getting started with Raw Wealthy is simple and straightforward.</p>
            </div>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Register</h3>
                    <p class="step-description">Create your account in less than 2 minutes with our simple registration process.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3 class="step-title">Invest</h3>
                    <p class="step-description">Choose a raw material investment plan that suits your goals and make your first deposit.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Earn</h3>
                    <p class="step-description">Watch your investment grow with daily returns that you can withdraw or reinvest.</p>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="section testimonials" id="testimonials">
            <div class="section-title">
                <h2>What Our Investors Say</h2>
                <p>Hear from our satisfied investors who have achieved financial success with our platform.</p>
            </div>
            <div class="testimonials-container">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "I've been investing with Raw Wealthy for over a year now, and the returns have been consistently impressive. The platform is easy to use, and their customer support is excellent."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael Johnson">
                        </div>
                        <div class="author-info">
                            <h4>Michael Johnson</h4>
                            <p>Gold Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "As a beginner in investing, I was hesitant at first. But Raw Wealthy made the process so simple. I started with the Cocoa plan and have already upgraded to Gold. Highly recommended!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Williams">
                        </div>
                        <div class="author-info">
                            <h4>Sarah Williams</h4>
                            <p>Silver Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "The transparency and regular updates on my investments give me peace of mind. I've tried other platforms, but Raw Wealthy stands out with their professionalism and high returns."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Robert Chen">
                        </div>
                        <div class="author-info">
                            <h4>Robert Chen</h4>
                            <p>Bronze Investor</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Raw Wealthy</h3>
                    <p>Your trusted partner for secure and high-yield raw materials investment opportunities. Start growing your wealth today.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.showPage('home')"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#about"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="#" onclick="app.showPage('investment-plans')"><i class="fas fa-chevron-right"></i> Investment Plans</a></li>
                        <li><a href="#how-it-works"><i class="fas fa-chevron-right"></i> How It Works</a></li>
                        <li><a href="#testimonials"><i class="fas fa-chevron-right"></i> Testimonials</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Cookie Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Disclaimer</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> support@rawwealthy.com</li>
                        <li><i class="fas fa-phone"></i> +234 (0) 812 345 6789</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Investment St, Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Raw Wealthy Investment Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Registration Page -->
    <div id="registration-page" class="registration-page" style="display: none;">
        <div class="registration-container">
            <div class="registration-info">
                <h2>Join Thousands of Successful Investors</h2>
                <p>Create your account today and start your journey to financial freedom with our secure and high-yield raw materials investment plans.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Secure and encrypted platform</li>
                    <li><i class="fas fa-check-circle"></i> Daily returns on your investments</li>
                    <li><i class="fas fa-check-circle"></i> 24/7 customer support</li>
                    <li><i class="fas fa-check-circle"></i> Multiple withdrawal options</li>
                    <li><i class="fas fa-check-circle"></i> Referral bonus program</li>
                </ul>
            </div>
            <div class="registration-form">
                <div class="form-header">
                    <h2>Create Account</h2>
                    <p>Fill in your details to get started</p>
                </div>
                <form id="registration-form">
                    <div class="form-group">
                        <label for="fullname">Full Name</label>
                        <input type="text" id="fullname" class="form-control" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Create a password" required>
                        <button type="button" class="password-toggle" id="password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="password-strength" id="password-strength"></div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" class="form-control" placeholder="Confirm your password" required>
                        <button type="button" class="password-toggle" id="confirm-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="referral">Referral Code (Optional)</label>
                        <input type="text" id="referral" class="form-control" placeholder="Enter referral code if any">
                    </div>
                    <div class="form-group">
                        <label for="risk-tolerance">Risk Tolerance</label>
                        <select id="risk-tolerance" class="form-control" required>
                            <option value="low">Low (Conservative)</option>
                            <option value="medium" selected>Medium (Balanced)</option>
                            <option value="high">High (Aggressive)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="investment-strategy">Investment Strategy</label>
                        <select id="investment-strategy" class="form-control" required>
                            <option value="conservative">Conservative</option>
                            <option value="balanced" selected>Balanced</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="register-btn">
                        <span class="btn-text">Create Account</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" onclick="app.showPage('login')">Login here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="login-page" style="display: none;">
        <div class="login-container">
            <div class="login-info">
                <h2>Welcome Back!</h2>
                <p>Access your investment dashboard to track your portfolio, view earnings, and manage your investments.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Track your investment performance</li>
                    <li><i class="fas fa-check-circle"></i> View real-time earnings</li>
                    <li><i class="fas fa-check-circle"></i> Manage your portfolio</li>
                    <li><i class="fas fa-check-circle"></i> Withdraw your earnings</li>
                    <li><i class="fas fa-check-circle"></i> Access exclusive features</li>
                </ul>
            </div>
            <div class="login-form">
                <div class="login-form-header">
                    <h2>Login to Your Account</h2>
                    <p>Enter your credentials to access your dashboard</p>
                </div>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                        <button type="button" class="password-toggle" id="login-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <a href="#" class="forgot-password" onclick="app.openModal('password-reset-modal'); return false;">Forgot Password?</a>
                    </div>
                    <div id="two-factor-section" style="display: none;">
                        <div class="form-group">
                            <label for="two-factor-code">Two-Factor Authentication Code</label>
                            <input type="text" id="two-factor-code" class="form-control" placeholder="Enter 6-digit code">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="login-btn">
                        <span class="btn-text">Login</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="login-form-footer">
                    <p>Don't have an account? <a href="#" onclick="app.showPage('register')">Register here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="dashboard-page" style="display: none;">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h1>Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">JD</div>
                    <div>
                        <div id="user-name">John Doe</div>
                        <div style="color: var(--text-muted); font-size: 0.9rem;" id="user-tier">Standard Investor</div>
                    </div>
                    <button class="btn btn-outline" onclick="app.logout()">Logout</button>
                </div>
            </div>
            <div class="dashboard-content">
                <div class="dashboard-main">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Balance</h3>
                            <div class="value" id="total-balance">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Active Investments</h3>
                            <div class="value" id="active-investments">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Total Earnings</h3>
                            <div class="value" id="total-earnings">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Referral Bonus</h3>
                            <div class="value" id="referral-bonus">0.00</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Earnings Overview</h3>
                        <canvas id="earnings-chart"></canvas>
                    </div>
                    <div class="investments-list">
                        <h3>Active Investments</h3>
                        <div id="active-investments-list">
                            <!-- Active investments will be dynamically loaded here -->
                        </div>
                    </div>
                    <div class="transactions-list">
                        <h3>Recent Transactions</h3>
                        <div id="recent-transactions-list">
                            <!-- Recent transactions will be dynamically loaded here -->
                        </div>
                    </div>
                </div>
                <div class="dashboard-sidebar">
                    <div class="quick-actions">
                        <div class="action-card" onclick="app.showPage('investment-plans')">
                            <i class="fas fa-plus-circle"></i>
                            <h3>New Investment</h3>
                            <p>Start a new investment plan</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('deposit-modal')">
                            <i class="fas fa-wallet"></i>
                            <h3>Deposit Funds</h3>
                            <p>Add funds to your account</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('withdraw-modal')">
                            <i class="fas fa-money-bill-wave"></i>
                            <h3>Withdraw Funds</h3>
                            <p>Transfer to your bank account</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('referral')">
                            <i class="fas fa-user-friends"></i>
                            <h3>Refer Friends</h3>
                            <p>Earn 15% referral bonus</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('support')">
                            <i class="fas fa-headset"></i>
                            <h3>Support</h3>
                            <p>24/7 customer service</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('profile')">
                            <i class="fas fa-user-cog"></i>
                            <h3>Profile</h3>
                            <p>Manage your account</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Plans Page -->
    <div id="investment-plans-page" class="investment-plans-page" style="display: none;">
        <div class="investment-plans-container">
            <div class="investment-plans-header">
                <h1>Raw Materials Investment Plans</h1>
                <p>Choose the plan that best fits your financial goals</p>
            </div>
            <div class="investment-plans-content">
                <div class="plans-container" id="investment-plans-list">
                    <!-- Investment plans will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profile-page" class="profile-page" style="display: none;">
        <div class="profile-container">
            <div class="profile-header">
                <h1>Profile Settings</h1>
                <button class="btn btn-primary" onclick="app.showPage('dashboard')">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-sidebar">
                    <ul class="profile-nav">
                        <li><a href="#" class="active" onclick="app.switchProfileTab('personal')">
                            <i class="fas fa-user"></i> Personal Information
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('security')">
                            <i class="fas fa-shield-alt"></i> Security
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('bank')">
                            <i class="fas fa-university"></i> Bank Details
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('preferences')">
                            <i class="fas fa-cog"></i> Preferences
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('kyc')">
                            <i class="fas fa-id-card"></i> KYC Verification
                        </a></li>
                    </ul>
                </div>
                <div class="profile-main">
                    <!-- Personal Information Tab -->
                    <div class="profile-section" id="personal-tab">
                        <h2>Personal Information</h2>
                        <form id="personal-form">
                            <div class="form-group">
                                <label for="profile-fullname">Full Name</label>
                                <input type="text" id="profile-fullname" class="form-control" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label for="profile-email">Email Address</label>
                                <input type="email" id="profile-email" class="form-control" value="john.doe@example.com" readonly>
                            </div>
                            <div class="form-group">
                                <label for="profile-phone">Phone Number</label>
                                <input type="tel" id="profile-phone" class="form-control" value="+234 (0) 812 345 6789">
                            </div>
                            <div class="form-group">
                                <label for="profile-country">Country</label>
                                <select id="profile-country" class="form-control">
                                    <option value="ng">Nigeria</option>
                                    <option value="gh">Ghana</option>
                                    <option value="sa">South Africa</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Security Tab -->
                    <div class="profile-section" id="security-tab" style="display: none;">
                        <h2>Security Settings</h2>
                        <div class="form-group">
                            <label>Two-Factor Authentication</label>
                            <div class="two-factor-setup">
                                <p>Enhance your account security with two-factor authentication.</p>
                                <div id="two-factor-status">
                                    <p>Status: <span id="2fa-status-text">Disabled</span></p>
                                </div>
                                <button class="btn btn-outline" id="enable-2fa-btn" onclick="app.enable2FA()">Enable 2FA</button>
                                <button class="btn btn-outline" id="disable-2fa-btn" style="display: none;" onclick="app.disable2FA()">Disable 2FA</button>
                            </div>
                        </div>
                        <form id="password-change-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <input type="password" id="current-password" class="form-control" placeholder="Enter current password">
                            </div>
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <input type="password" id="new-password" class="form-control" placeholder="Enter new password">
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password">Confirm New Password</label>
                                <input type="password" id="confirm-new-password" class="form-control" placeholder="Confirm new password">
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                    </div>

                    <!-- Bank Details Tab -->
                    <div class="profile-section" id="bank-tab" style="display: none;">
                        <h2>Bank Account Details</h2>
                        <form id="bank-form">
                            <div class="form-group">
                                <label for="bank-name">Bank Name</label>
                                <input type="text" id="bank-name" class="form-control" placeholder="Enter your bank name">
                            </div>
                            <div class="form-group">
                                <label for="account-name">Account Name</label>
                                <input type="text" id="account-name" class="form-control" placeholder="Enter account name">
                            </div>
                            <div class="form-group">
                                <label for="account-number">Account Number</label>
                                <input type="text" id="account-number" class="form-control" placeholder="Enter account number">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Bank Details</button>
                        </form>
                    </div>

                    <!-- Preferences Tab -->
                    <div class="profile-section" id="preferences-tab" style="display: none;">
                        <h2>Account Preferences</h2>
                        <form id="preferences-form">
                            <div class="form-group">
                                <label for="currency">Default Currency</label>
                                <select id="currency" class="form-control">
                                    <option value="ngn">NGN ()</option>
                                    <option value="usd">USD ($)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="language">Language</label>
                                <select id="language" class="form-control">
                                    <option value="en">English</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="timezone">Timezone</label>
                                <select id="timezone" class="form-control">
                                    <option value="wast">West Africa Standard Time (WAT)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="risk-tolerance-pref">Risk Tolerance</label>
                                <select id="risk-tolerance-pref" class="form-control">
                                    <option value="low">Low (Conservative)</option>
                                    <option value="medium">Medium (Balanced)</option>
                                    <option value="high">High (Aggressive)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="investment-strategy-pref">Investment Strategy</label>
                                <select id="investment-strategy-pref" class="form-control">
                                    <option value="conservative">Conservative</option>
                                    <option value="balanced">Balanced</option>
                                    <option value="aggressive">Aggressive</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Preferences</button>
                        </form>
                    </div>

                    <!-- KYC Verification Tab -->
                    <div class="profile-section" id="kyc-tab" style="display: none;">
                        <h2>KYC Verification</h2>
                        <div id="kyc-status">
                            <p>Status: <span id="kyc-status-text" class="status-badge pending">Pending</span></p>
                        </div>
                        <form id="kyc-form">
                            <div class="form-group">
                                <label for="id-type">ID Type</label>
                                <select id="id-type" class="form-control" required>
                                    <option value="">Select ID Type</option>
                                    <option value="national_id">National ID</option>
                                    <option value="passport">Passport</option>
                                    <option value="driver_license">Driver's License</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="id-number">ID Number</label>
                                <input type="text" id="id-number" class="form-control" placeholder="Enter ID Number" required>
                            </div>
                            <div class="form-group">
                                <label>Upload ID Front</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-front').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID front image</p>
                                    <input type="file" id="id-front" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="id-front-preview" class="file-preview" src="" alt="ID front preview">
                            </div>
                            <div class="form-group">
                                <label>Upload ID Back</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-back').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID back image</p>
                                    <input type="file" id="id-back" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="id-back-preview" class="file-preview" src="" alt="ID back preview">
                            </div>
                            <div class="form-group">
                                <label>Upload Selfie with ID</label>
                                <div class="file-upload-container" onclick="document.getElementById('selfie-with-id').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload selfie with ID</p>
                                    <input type="file" id="selfie-with-id" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="selfie-with-id-preview" class="file-preview" src="" alt="Selfie with ID preview">
                            </div>
                            <button type="submit" class="btn btn-primary">Submit KYC Application</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Page -->
    <div id="referral-page" class="referral-page" style="display: none;">
        <div class="referral-container">
            <div class="referral-header">
                <h1>Referral Program</h1>
                <p>Earn more by inviting friends to join Raw Wealthy</p>
            </div>
            <div class="referral-content">
                <div class="referral-stats">
                    <h2>Your Referral Stats</h2>
                    <div class="referral-stat">
                        <span>Total Referrals</span>
                        <span id="total-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Active Referrals</span>
                        <span id="active-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Total Earnings</span>
                        <span style="color: var(--accent-gold);" id="total-referral-earnings">0.00</span>
                    </div>
                    <div class="referral-stat">
                        <span>Pending Earnings</span>
                        <span style="color: var(--warning);" id="pending-referral-earnings">0.00</span>
                    </div>
                </div>
                <div class="referral-links">
                    <h2>Your Referral Link</h2>
                    <div class="form-group">
                        <label>Share this link with friends</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-link" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralLink()">Copy</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Your Referral Code</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-code" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralCode()">Copy</button>
                        </div>
                    </div>
                    <div style="margin-top: 1.5rem;">
                        <h3>How it works:</h3>
                        <ul style="padding-left: 1.2rem; margin-top: 0.5rem;">
                            <li>Share your referral link with friends</li>
                            <li>When they sign up and invest, you earn 20% of their first investment</li>
                            <li>No limit on how much you can earn</li>
                            <li>Earnings are credited after their investment is approved</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div id="support-page" class="support-page" style="display: none;">
        <div class="support-container">
            <div class="support-header">
                <h1>Help & Support</h1>
                <p>We're here to help you with any questions or issues</p>
            </div>
            <div class="support-content">
                <div class="support-categories">
                    <div class="support-category active" onclick="app.switchSupportCategory('faq')">
                        <i class="fas fa-question-circle"></i> FAQ
                    </div>
                    <div class="support-category" onclick="app.switchSupportCategory('contact')">
                        <i class="fas fa-envelope"></i> Contact Us
                    </div>
                    <div class="support-category" onclick="app.switchSupportCategory('guides')">
                        <i class="fas fa-book"></i> Guides
                    </div>
                </div>
                <div class="support-main">
                    <!-- FAQ Category -->
                    <div id="faq-category">
                        <h2>Frequently Asked Questions</h2>
                        <div class="faq-item active">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                How do I start investing? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>To start investing, simply register for an account, verify your identity, choose an investment plan that suits your goals, and make your first deposit. The process takes less than 10 minutes.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                When will I receive my returns? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Returns are calculated daily and credited to your account at the end of each business day. You can withdraw your earnings or reinvest them for compound growth.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                What is the minimum investment? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>The minimum investment is 3,500 for most of our plans. We offer tiered plans to accommodate different investment levels and goals.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                How secure is my investment? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>We employ bank-level security measures including SSL encryption, two-factor authentication, and segregated client accounts. Your investments are protected by our comprehensive security protocols.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                Are there any withdrawal fees? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Yes, we charge a 5% platform fee on all withdrawals to cover transaction costs and platform maintenance. This fee is automatically deducted from your withdrawal amount.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Category -->
                    <div id="contact-category" style="display: none;">
                        <h2>Contact Our Support Team</h2>
                        <form id="support-form">
                            <div class="form-group">
                                <label for="support-subject">Subject</label>
                                <input type="text" id="support-subject" class="form-control" placeholder="Enter subject" required>
                            </div>
                            <div class="form-group">
                                <label for="support-message">Message</label>
                                <textarea id="support-message" class="form-control" rows="5" placeholder="Describe your issue" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </form>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <p>Or contact us directly:</p>
                            <p><i class="fas fa-envelope"></i> support@rawwealthy.com</p>
                            <p><i class="fas fa-phone"></i> +234 (0) 812 345 6789</p>
                        </div>
                    </div>

                    <!-- Guides Category -->
                    <div id="guides-category" style="display: none;">
                        <h2>Investment Guides</h2>
                        <div class="faq-item active">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                Getting Started Guide <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>This comprehensive guide will walk you through the process of setting up your account, verifying your identity, making your first investment, and tracking your returns.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                Understanding Investment Plans <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Learn about our different investment plans, their risk profiles, expected returns, and which plan might be best suited for your financial goals.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                Security Best Practices <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Discover how to keep your account secure with strong passwords, two-factor authentication, and recognizing potential security threats.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h1>Admin Dashboard</h1>
                <button class="btn btn-outline" onclick="app.logout()">Logout</button>
            </div>
            <div class="admin-content">
                <div class="admin-sidebar">
                    <ul class="admin-nav">
                        <li><a href="#" class="active" onclick="app.switchAdminTab('overview')">
                            <i class="fas fa-tachometer-alt"></i> Overview
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('users')">
                            <i class="fas fa-users"></i> Users
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('investments')">
                            <i class="fas fa-chart-line"></i> Investments
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('deposits')">
                            <i class="fas fa-wallet"></i> Deposits
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('withdrawals')">
                            <i class="fas fa-money-bill-wave"></i> Withdrawals
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('analytics')">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </a></li>
                    </ul>
                </div>
                <div class="admin-main">
                    <!-- Overview Tab -->
                    <div id="overview-tab">
                        <h2>Platform Overview</h2>
                        <div class="admin-stats">
                            <div class="admin-stat">
                                <span class="value" id="admin-total-users">0</span>
                                <span class="label">Total Users</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-invested">0</span>
                                <span class="label">Total Invested</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-withdrawn">0</span>
                                <span class="label">Total Withdrawn</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-pending-requests">0</span>
                                <span class="label">Pending Requests</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-platform-earnings">0</span>
                                <span class="label">Platform Earnings</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-active-investments">0</span>
                                <span class="label">Active Investments</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <h3>Platform Growth</h3>
                            <canvas id="platform-growth-chart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h3>Investment Distribution</h3>
                            <canvas id="investment-distribution-chart"></canvas>
                        </div>
                    </div>

                    <!-- Users Tab -->
                    <div id="users-tab" style="display: none;">
                        <h2>User Management</h2>
                        <div class="filters">
                            <select class="filter-select" id="user-status-filter">
                                <option value="all">All Users</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="verified">Verified</option>
                                <option value="unverified">Unverified</option>
                            </select>
                            <input type="text" class="form-control" placeholder="Search users..." id="user-search">
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Joined</th>
                                    <th>Status</th>
                                    <th>Balance</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-table">
                                <!-- Users will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Investments Tab -->
                    <div id="investments-tab" style="display: none;">
                        <h2>Investment Requests</h2>
                        <div class="filters">
                            <select class="filter-select" id="investment-status-filter">
                                <option value="all">All Investments</option>
                                <option value="pending">Pending</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Plan</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-investments-table">
                                <!-- Investment requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Deposits Tab -->
                    <div id="deposits-tab" style="display: none;">
                        <h2>Deposit Requests</h2>
                        <div class="filters">
                            <select class="filter-select" id="deposit-status-filter">
                                <option value="all">All Deposits</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Proof</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-deposits-table">
                                <!-- Deposit requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Withdrawals Tab -->
                    <div id="withdrawals-tab" style="display: none;">
                        <h2>Withdrawal Requests</h2>
                        <div class="filters">
                            <select class="filter-select" id="withdrawal-status-filter">
                                <option value="all">All Withdrawals</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Fee</th>
                                    <th>Net Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Bank Details</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-withdrawals-table">
                                <!-- Withdrawal requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Analytics Tab -->
                    <div id="analytics-tab" style="display: none;">
                        <h2>Platform Analytics</h2>
                        <div class="admin-stats">
                            <div class="admin-stat">
                                <span class="value" id="analytics-daily-signups">0</span>
                                <span class="label">Daily Signups</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="analytics-weekly-investments">0</span>
                                <span class="label">Weekly Investments</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="analytics-monthly-revenue">0</span>
                                <span class="label">Monthly Revenue</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="analytics-avg-investment">0</span>
                                <span class="label">Avg. Investment</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <h3>Revenue Trends</h3>
                            <canvas id="revenue-trends-chart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h3>User Growth</h3>
                            <canvas id="user-growth-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Modal -->
    <div id="invest-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Make Investment</h2>
                <button class="close-modal" onclick="app.closeModal('invest-modal')">&times;</button>
            </div>
            <form id="invest-form">
                <div class="form-group">
                    <label for="investment-plan">Select Raw Material</label>
                    <select id="investment-plan" class="form-control" required>
                        <option value="">Choose a raw material</option>
                        <!-- Options will be dynamically loaded -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="investment-amount">Investment Amount ()</label>
                    <input type="number" id="investment-amount" class="form-control" placeholder="Enter amount" min="1000" required>
                </div>
                <div class="form-group">
                    <label>Auto Renew Investment</label>
                    <div class="form-check" style="margin-top: 10px;">
                        <input type="checkbox" id="auto-renew" class="form-check-input">
                        <label for="auto-renew" class="form-check-label">Automatically reinvest earnings when investment completes</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof</label>
                    <div class="file-upload-container" onclick="document.getElementById('investment-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="investment-proof" accept="image/*" style="display: none;" required>
                    </div>
                    <img id="investment-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="invest-btn">
                    <span class="btn-text">Submit Investment Request</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Deposit Funds</h2>
                <button class="close-modal" onclick="app.closeModal('deposit-modal')">&times;</button>
            </div>
            <form id="deposit-form">
                <div class="form-group">
                    <label for="deposit-amount">Amount ()</label>
                    <input type="number" id="deposit-amount" class="form-control" placeholder="Enter amount" min="500" required>
                </div>
                <div class="form-group">
                    <label for="deposit-method">Payment Method</label>
                    <select id="deposit-method" class="form-control" required>
                        <option value="">Select payment method</option>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                        <option value="paypal">PayPal</option>
                        <option value="card">Credit/Debit Card</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof</label>
                    <div class="file-upload-container" onclick="document.getElementById('deposit-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="deposit-proof" accept="image/*" style="display: none;" required>
                    </div>
                    <img id="deposit-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <div class="form-group" id="crypto-details" style="display: none;">
                    <label for="transaction-hash">Transaction Hash (For Crypto Payments)</label>
                    <input type="text" id="transaction-hash" class="form-control" placeholder="Enter transaction hash">
                </div>
                <div class="form-group">
                    <p><strong>Payment Details:</strong></p>
                    <div id="payment-details">
                        <p>Bank: Zenith Bank</p>
                        <p>Account Name: Raw Wealthy</p>
                        <p>Account Number: 1234567890</p>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="deposit-btn">
                    <span class="btn-text">Submit Deposit Request</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdraw-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Withdraw Funds</h2>
                <button class="close-modal" onclick="app.closeModal('withdraw-modal')">&times;</button>
            </div>
            <form id="withdraw-form">
                <div class="withdrawal-fee-notice">
                    <i class="fas fa-info-circle"></i>
                    <span>5% platform fee will be deducted from your withdrawal amount</span>
                </div>
                <div class="form-group">
                    <label for="withdraw-amount">Amount ()</label>
                    <input type="number" id="withdraw-amount" class="form-control" placeholder="Enter amount" min="1000" required>
                    <small style="color: var(--text-muted);">Available balance: <span id="available-balance">0.00</span></small>
                    <small style="color: var(--warning); display: block; margin-top: 0.5rem;" id="withdrawal-fee-notice">Platform fee: 0.00</small>
                </div>
                <div class="form-group">
                    <label for="withdraw-method">Withdrawal Method</label>
                    <select id="withdraw-method" class="form-control" required>
                        <option value="">Select withdrawal method</option>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                        <option value="paypal">PayPal</option>
                    </select>
                </div>
                <div id="bank-details" style="display: none;">
                    <div class="form-group">
                        <label for="withdraw-bank">Bank Name</label>
                        <input type="text" id="withdraw-bank" class="form-control" placeholder="Enter your bank name">
                    </div>
                    <div class="form-group">
                        <label for="withdraw-account-name">Account Name</label>
                        <input type="text" id="withdraw-account-name" class="form-control" placeholder="Enter account name">
                    </div>
                    <div class="form-group">
                        <label for="withdraw-account-number">Account Number</label>
                        <input type="text" id="withdraw-account-number" class="form-control" placeholder="Enter account number">
                    </div>
                </div>
                <div id="crypto-details-withdraw" style="display: none;">
                    <div class="form-group">
                        <label for="withdraw-wallet">Wallet Address</label>
                        <input type="text" id="withdraw-wallet" class="form-control" placeholder="Enter your wallet address">
                    </div>
                </div>
                <div id="paypal-details" style="display: none;">
                    <div class="form-group">
                        <label for="withdraw-paypal">PayPal Email</label>
                        <input type="email" id="withdraw-paypal" class="form-control" placeholder="Enter your PayPal email">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="withdraw-btn">
                    <span class="btn-text">Request Withdrawal</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Password Reset Modal -->
    <div id="password-reset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reset Your Password</h2>
                <button class="close-modal" onclick="app.closeModal('password-reset-modal')">&times;</button>
            </div>
            <div class="password-reset-steps">
                <div class="password-reset-step active">
                    <div class="password-reset-step-number">1</div>
                    <div class="password-reset-step-label">Email</div>
                </div>
                <div class="password-reset-step">
                    <div class="password-reset-step-number">2</div>
                    <div class="password-reset-step-label">Code</div>
                </div>
                <div class="password-reset-step">
                    <div class="password-reset-step-number">3</div>
                    <div class="password-reset-step-label">New Password</div>
                </div>
            </div>
            <form id="password-reset-form">
                <div class="form-group">
                    <label for="reset-email">Email Address</label>
                    <input type="email" id="reset-email" class="form-control" placeholder="Enter your email" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Code</button>
            </form>
            <div class="form-footer" style="margin-top: 1rem;">
                <p>Remember your password? <a href="#" onclick="app.closeModal('password-reset-modal'); app.showPage('login');">Login here</a></p>
            </div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="back-to-top">
        <i class="fas fa-chevron-up"></i>
    </div><script>
    // ==================== RAW WEALTHY FRONTEND v36.0 - FULL ADMIN INTEGRATION ====================
    const app = {
        // ==================== ENHANCED CONFIGURATION ====================
        const app = {
            // ==================== CONFIGURATION ====================
         // Replace lines ~1530-1540 with:
config: {
  API_BASE_URL: 'https://real-wealthy-1.onrender.com/api',
  'https://real-wealthy-1.onrender.com',
    // ... rest of config
}
                
                VERSION: '35.0.0',
                ENVIRONMENT: window.location.hostname === 'localhost' ? 'development' : 'production',
                MIN_INVESTMENT: 3500,
                MIN_DEPOSIT: 500,
                MIN_WITHDRAWAL: 1000,
                PLATFORM_FEE_PERCENT: 5,
                REFERRAL_COMMISSION_PERCENT: 15,
                WELCOME_BONUS: 10000
            },
        
        // ==================== ENHANCED APPLICATION STATE ====================
        state: {
            currentUser: null,
            token: localStorage.getItem('raw_wealthy_token'),
            investmentPlans: [],
            notifications: [],
            isAdmin: false,
            isSuperAdmin: false,
            isAuthenticated: false,
            charts: {},
            userStats: {
                balance: 0,
                activeInvestments: 0,
                totalEarnings: 0,
                referralEarnings: 0
            },
            adminData: {
                users: [],
                pendingInvestments: [],
                pendingDeposits: [],
                pendingWithdrawals: [],
                pendingKYC: [],
                recentTransactions: [],
                platformStats: {}
            },
            currentImageRotation: 0,
            currentImageScale: 1
        },

        // ==================== ENHANCED INITIALIZATION ====================
        init() {
            console.log(' Raw Wealthy Frontend v36.0 Initializing...');
            console.log(` Backend URL: ${this.config.API_BASE_URL}`);
            console.log(` Environment: ${this.config.ENVIRONMENT}`);
            
            this.setupEventListeners();
            this.checkAuthentication();
            this.loadInvestmentPlans();
            this.initAnimations();
            this.setupImageErrorHandling();
            
            // Check URL for referral code
            this.checkReferralFromURL();
            
            // Check for saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                const themeIcon = document.querySelector('#theme-toggle i');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }

            // Initialize any modals
            this.initImageModal();
        },

        // ==================== ENHANCED EVENT LISTENERS ====================
        setupEventListeners() {
            // Theme toggle
            document.getElementById('theme-toggle').addEventListener('click', () => this.toggleTheme());
            
            // Mobile menu
            document.getElementById('hamburger').addEventListener('click', () => this.openMobileMenu());
            document.getElementById('close-mobile-menu').addEventListener('click', () => this.closeMobileMenu());
            document.getElementById('mobile-menu-overlay').addEventListener('click', () => this.closeMobileMenu());
            
            // Back to top
            document.getElementById('back-to-top').addEventListener('click', () => this.scrollToTop());
            
            // Form submissions
            document.getElementById('registration-form').addEventListener('submit', (e) => this.handleRegistration(e));
            document.getElementById('login-form').addEventListener('submit', (e) => this.handleLogin(e));
            document.getElementById('invest-form').addEventListener('submit', (e) => this.handleInvestment(e));
            document.getElementById('deposit-form').addEventListener('submit', (e) => this.handleDeposit(e));
            document.getElementById('withdraw-form').addEventListener('submit', (e) => this.handleWithdrawal(e));
            document.getElementById('personal-form').addEventListener('submit', (e) => this.handleProfileUpdate(e));
            document.getElementById('bank-form').addEventListener('submit', (e) => this.handleBankUpdate(e));
            document.getElementById('kyc-form').addEventListener('submit', (e) => this.handleKYCSubmission(e));
            document.getElementById('support-form').addEventListener('submit', (e) => this.handleSupportRequest(e));
            document.getElementById('password-reset-form').addEventListener('submit', (e) => this.handlePasswordReset(e));
            
            // Password toggles
            this.initPasswordToggles();
            
            // File upload previews
            this.initFileUploadPreviews();
            
            // Scroll event for navbar
            window.addEventListener('scroll', () => this.handleScroll());
            
            // Withdrawal amount change listener
            const withdrawAmount = document.getElementById('withdraw-amount');
            if (withdrawAmount) {
                withdrawAmount.addEventListener('input', () => this.updateWithdrawalFee());
            }
            
            // Investment amount validation
            const investAmount = document.getElementById('investment-amount');
            if (investAmount) {
                investAmount.addEventListener('input', () => this.validateInvestmentAmount());
            }
            
            // Auto-scroll to top when page changes
            window.addEventListener('hashchange', () => window.scrollTo(0, 0));
            
            // Initialize stats animation
            this.animateStats();

            // Admin search functionality
            const userSearch = document.getElementById('user-search');
            if (userSearch) {
                userSearch.addEventListener('input', (e) => this.searchUsers(e.target.value));
            }

            // Close modals on outside click
            window.addEventListener('click', (event) => {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    this.closeAllModals();
                }
                // Admin shortcut: Ctrl+Shift+A for admin dashboard
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    if (this.state.isAdmin) {
                        this.showPage('admin');
                    }
                }
            });
        },

        // ==================== ENHANCED API REQUEST HANDLER ====================
        async apiRequest(endpoint, options = {}) {
            const url = this.config.API_BASE_URL + endpoint;
            
            // Default headers
            const headers = {
                'Content-Type': 'application/json',
                ...options.headers
            };
            
            // Add auth token if available
            if (this.state.token) {
                headers['Authorization'] = `Bearer ${this.state.token}`;
            }
            
            // Prepare config
            const config = {
                method: options.method || 'GET',
                headers: headers,
                ...options
            };
            
            // Handle FormData separately
            if (options.body instanceof FormData) {
                delete config.headers['Content-Type'];
                config.body = options.body;
            } else if (options.body && typeof options.body === 'object') {
                config.body = JSON.stringify(options.body);
            }
            
            try {
                this.showLoadingSpinner(true);
                
                const response = await fetch(url, config);
                let data;
                
                // Handle different response types
                const contentType = response.headers.get('content-type');
                if (contentType && contentType.includes('application/json')) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }
                
                if (!response.ok) {
                    throw new Error(data.message || data || `HTTP ${response.status}`);
                }
                
                if (typeof data === 'object' && !data.success && data.message) {
                    throw new Error(data.message);
                }
                
                return data;
            } catch (error) {
                console.error('API Request Error:', error);
                
                // Handle specific error cases
                if (error.message.includes('401') || error.message.includes('token')) {
                    this.handleTokenExpired();
                }
                
                if (error.message.includes('Network')) {
                    this.showToast('Network error. Please check your connection.', 'error');
                } else {
                    this.showToast(error.message || 'An error occurred. Please try again.', 'error');
                }
                
                throw error;
            } finally {
                this.showLoadingSpinner(false);
            }
        },

        // ==================== ENHANCED FILE UPLOAD HANDLER ====================
        async uploadFile(file, folder = 'general') {
            const formData = new FormData();
            formData.append('file', file);
            formData.append('folder', folder);
            
            try {
                const response = await this.apiRequest('/upload', {
                    method: 'POST',
                    body: formData
                });
                
                return response.data.fileUrl;
            } catch (error) {
                console.error('File upload failed:', error);
                throw new Error('Failed to upload file. Please try again.');
            }
        },

        // ==================== ENHANCED AUTHENTICATION FUNCTIONS ====================
        checkAuthentication() {
            if (this.state.token) {
                this.verifyToken();
            } else {
                this.showPage('home');
            }
        },

        async verifyToken() {
            try {
                const response = await this.apiRequest('/profile');
                this.state.currentUser = response.data.user;
                this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
                this.state.isSuperAdmin = this.state.currentUser.role === 'super_admin';
                this.state.isAuthenticated = true;
                
                // Update user avatar
                const initials = this.state.currentUser.full_name
                    .split(' ')
                    .map(n => n[0])
                    .join('')
                    .toUpperCase();
                document.getElementById('user-avatar').textContent = initials;
                
                // Update dashboard if on dashboard page
                if (window.location.hash === '#dashboard' || document.getElementById('dashboard-page').style.display === 'flex') {
                    this.updateDashboard();
                }
                
                if (this.state.isAdmin && (window.location.hash === '#admin' || document.getElementById('admin-page').style.display === 'flex')) {
                    this.updateAdminDashboard();
                }
            } catch (error) {
                localStorage.removeItem('raw_wealthy_token');
                this.state.token = null;
                this.state.isAuthenticated = false;
                this.showPage('home');
            }
        },

        handleTokenExpired() {
            localStorage.removeItem('raw_wealthy_token');
            this.state.token = null;
            this.state.currentUser = null;
            this.state.isAuthenticated = false;
            this.showToast('Your session has expired. Please login again.', 'warning');
            this.showPage('login');
        },

        // ==================== ENHANCED PAGE NAVIGATION ====================
        showPage(page) {
            // Hide all pages
            const pages = [
                'home-page', 'registration-page', 'login-page', 'dashboard-page',
                'investment-plans-page', 'profile-page', 'referral-page', 
                'support-page', 'admin-page', 'investment-history-page',
                'transaction-history-page', 'kyc-page'
            ];
            
            pages.forEach(pageId => {
                const element = document.getElementById(pageId);
                if (element) element.style.display = 'none';
            });
            
            // Show selected page
            let pageElement;
            switch(page) {
                case 'home':
                    pageElement = document.getElementById('home-page');
                    if (pageElement) pageElement.style.display = 'block';
                    window.scrollTo(0, 0);
                    break;
                case 'register':
                    pageElement = document.getElementById('registration-page');
                    if (pageElement) pageElement.style.display = 'flex';
                    break;
                case 'login':
                    pageElement = document.getElementById('login-page');
                    if (pageElement) pageElement.style.display = 'flex';
                    break;
                case 'dashboard':
                    pageElement = document.getElementById('dashboard-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.updateDashboard();
                    }
                    break;
                case 'investment-plans':
                    pageElement = document.getElementById('investment-plans-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadInvestmentPlansPage();
                    }
                    break;
                case 'profile':
                    pageElement = document.getElementById('profile-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadProfileData();
                    }
                    break;
                case 'referral':
                    pageElement = document.getElementById('referral-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadReferralData();
                    }
                    break;
                case 'support':
                    pageElement = document.getElementById('support-page');
                    if (pageElement) pageElement.style.display = 'flex';
                    break;
                case 'admin':
                    pageElement = document.getElementById('admin-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.updateAdminDashboard();
                    }
                    break;
                case 'investment-history':
                    pageElement = document.getElementById('investment-history-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadInvestmentHistory();
                    }
                    break;
                case 'transaction-history':
                    pageElement = document.getElementById('transaction-history-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadTransactionHistory();
                    }
                    break;
                case 'kyc':
                    pageElement = document.getElementById('kyc-page');
                    if (pageElement) {
                        pageElement.style.display = 'flex';
                        this.loadKYCData();
                    }
                    break;
            }
            
            // Close mobile menu if open
            this.closeMobileMenu();
            
            // Update URL hash
            window.location.hash = page;
        },

        // ==================== ENHANCED MODAL FUNCTIONS ====================
        openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
                
                // Modal-specific setup
                if (modalId === 'withdraw-modal' && this.state.currentUser) {
                    document.getElementById('available-balance').textContent = 
                        `${this.state.currentUser.balance.toLocaleString()}`;
                    this.updateWithdrawalFee();
                }
                
                if (modalId === 'invest-modal') {
                    this.loadInvestmentPlansForModal();
                }
                
                if (modalId === 'user-details-modal') {
                    this.loadUserDetailsModal();
                }
                
                if (modalId === 'edit-user-modal') {
                    this.loadEditUserModal();
                }
            }
        },

        closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                
                // Reset form
                const form = modal.querySelector('form');
                if (form) form.reset();
                
                // Clear file previews
                const previews = modal.querySelectorAll('.file-preview');
                previews.forEach(preview => {
                    preview.style.display = 'none';
                    preview.src = '';
                });
                
                // Clear file inputs
                const fileInputs = modal.querySelectorAll('input[type="file"]');
                fileInputs.forEach(input => input.value = '');
            }
        },

        closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        },

        // ==================== ENHANCED INVESTMENT PLANS ====================
        async loadInvestmentPlans() {
            try {
                const response = await this.apiRequest('/plans');
                this.state.investmentPlans = response.data.plans;
                this.renderInvestmentPlans();
            } catch (error) {
                console.error('Failed to load investment plans:', error);
                // Fallback to default plans
                this.state.investmentPlans = this.getDefaultPlans();
                this.renderInvestmentPlans();
            }
        },

        getDefaultPlans() {
            return [
                {
                    _id: '1',
                    name: 'Cocoa Beans',
                    description: 'Invest in premium cocoa beans with stable returns',
                    min_amount: 3500,
                    daily_interest: 2.5,
                    total_interest: 75,
                    duration: 30,
                    risk_level: 'low',
                    is_popular: true
                },
                {
                    _id: '2',
                    name: 'Gold',
                    description: 'Precious metal investment with high liquidity',
                    min_amount: 50000,
                    daily_interest: 3.2,
                    total_interest: 96,
                    duration: 30,
                    risk_level: 'medium',
                    is_popular: true
                },
                {
                    _id: '3',
                    name: 'Crude Oil',
                    description: 'Energy sector investment with premium returns',
                    min_amount: 100000,
                    daily_interest: 4.1,
                    total_interest: 123,
                    duration: 30,
                    risk_level: 'high'
                }
            ];
        },

        renderInvestmentPlans() {
            const container = document.getElementById('plans-container');
            if (!container || this.state.investmentPlans.length === 0) return;
            
            container.innerHTML = this.state.investmentPlans.slice(0, 3).map(plan => `
                <div class="plan-card card-hover">
                    <div class="plan-header">
                        <h3 class="plan-name">${plan.name}</h3>
                        <div class="plan-price">${plan.min_amount.toLocaleString()}</div>
                        <div class="plan-period">Minimum Investment</div>
                    </div>
                    <div class="plan-features">
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Daily Returns: ${plan.daily_interest}%</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Total Returns: ${plan.total_interest}%</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Duration: ${plan.duration} Days</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk Level: ${plan.risk_level}</span>
                        </div>
                    </div>
                    <button class="btn btn-primary plan-button" onclick="app.showPage('investment-plans')">
                        View Details
                    </button>
                </div>
            `).join('');
        },

        loadInvestmentPlansPage() {
            const container = document.getElementById('investment-plans-list');
            if (!container || this.state.investmentPlans.length === 0) return;
            
            container.innerHTML = this.state.investmentPlans.map(plan => `
                <div class="plan-card card-hover">
                    ${plan.is_popular ? '<div class="plan-badge">Most Popular</div>' : ''}
                    <div class="plan-header">
                        <h3 class="plan-name">${plan.name}</h3>
                        <div class="plan-price">${plan.min_amount.toLocaleString()}</div>
                        <div class="plan-period">Minimum Investment</div>
                    </div>
                    <div class="plan-features">
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Daily Returns: ${plan.daily_interest}%</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Total Returns: ${plan.total_interest}%</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Duration: ${plan.duration} Days</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk Level: ${plan.risk_level}</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>${plan.description}</span>
                        </div>
                    </div>
                    <button class="btn btn-primary plan-button" onclick="app.openInvestmentModal('${plan._id}')">
                        Invest Now
                    </button>
                </div>
            `).join('');
        },

        loadInvestmentPlansForModal() {
            const select = document.getElementById('investment-plan');
            if (!select || this.state.investmentPlans.length === 0) return;
            
            select.innerHTML = '<option value="">Choose a raw material</option>' +
                this.state.investmentPlans.map(plan => `
                    <option value="${plan._id}">${plan.name} - ${plan.min_amount.toLocaleString()} Minimum</option>
                `).join('');
        },

        openInvestmentModal(planId) {
            const plan = this.state.investmentPlans.find(p => p._id === planId);
            if (plan) {
                const planSelect = document.getElementById('investment-plan');
                if (planSelect) {
                    planSelect.value = plan._id;
                    const amountInput = document.getElementById('investment-amount');
                    if (amountInput) {
                        amountInput.min = plan.min_amount;
                        amountInput.value = plan.min_amount;
                        amountInput.placeholder = `Minimum: ${plan.min_amount.toLocaleString()}`;
                    }
                }
                this.openModal('invest-modal');
            }
        },

        validateInvestmentAmount() {
            const amountInput = document.getElementById('investment-amount');
            const planSelect = document.getElementById('investment-plan');
            
            if (!amountInput || !planSelect) return;
            
            const planId = planSelect.value;
            const amount = parseFloat(amountInput.value) || 0;
            
            if (!planId) {
                this.showToast('Please select an investment plan first', 'warning');
                amountInput.value = '';
                return;
            }
            
            const plan = this.state.investmentPlans.find(p => p._id === planId);
            if (plan && amount < plan.min_amount) {
                this.showToast(`Minimum investment for ${plan.name} is ${plan.min_amount.toLocaleString()}`, 'warning');
            }
        },

        // ==================== ENHANCED REGISTRATION ====================
        async handleRegistration(e) {
            e.preventDefault();
            
            const formData = {
                full_name: document.getElementById('fullname').value.trim(),
                email: document.getElementById('email').value.trim().toLowerCase(),
                phone: document.getElementById('phone').value.trim(),
                password: document.getElementById('password').value,
                referral_code: document.getElementById('referral').value.trim().toUpperCase() || undefined,
                risk_tolerance: document.getElementById('risk-tolerance').value,
                investment_strategy: document.getElementById('investment-strategy').value
            };
            
            // Validation
            if (document.getElementById('password').value !== document.getElementById('confirm-password').value) {
                this.showToast('Passwords do not match!', 'error');
                return;
            }
            
            if (document.getElementById('password').value.length < 6) {
                this.showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            this.setLoadingState('register-btn', true);
            
            try {
                const response = await this.apiRequest('/auth/register', {
                    method: 'POST',
                    body: formData
                });
                
                this.state.token = response.data.token;
                this.state.currentUser = response.data.user;
                localStorage.setItem('raw_wealthy_token', response.data.token);
                
                this.showToast('Registration successful! Welcome to Raw Wealthy.', 'success');
                this.setLoadingState('register-btn', false);
                
                // Redirect to dashboard
                setTimeout(() => {
                    this.showPage('dashboard');
                }, 1500);
                
            } catch (error) {
                this.setLoadingState('register-btn', false);
            }
        },

        // ==================== ENHANCED LOGIN ====================
        async handleLogin(e) {
            e.preventDefault();
            
            const formData = {
                email: document.getElementById('login-email').value.trim().toLowerCase(),
                password: document.getElementById('login-password').value
            };
            
            this.setLoadingState('login-btn', true);
            
            try {
                const response = await this.apiRequest('/auth/login', {
                    method: 'POST',
                    body: formData
                });
                
                this.state.token = response.data.token;
                this.state.currentUser = response.data.user;
                this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
                this.state.isSuperAdmin = this.state.currentUser.role === 'super_admin';
                localStorage.setItem('raw_wealthy_token', response.data.token);
                
                this.showToast('Login successful!', 'success');
                this.setLoadingState('login-btn', false);
                
                // Redirect based on role
                setTimeout(() => {
                    if (this.state.isAdmin) {
                        this.showPage('admin');
                    } else {
                        this.showPage('dashboard');
                    }
                }, 1000);
                
            } catch (error) {
                this.setLoadingState('login-btn', false);
            }
        },

        // ==================== ENHANCED DASHBOARD FUNCTIONS ====================
        async updateDashboard() {
            if (!this.state.currentUser) return;
            
            try {
                const response = await this.apiRequest('/profile');
                const user = response.data.user;
                const stats = response.data.dashboard_stats;
                
                // Update user info
                document.getElementById('user-name').textContent = user.full_name;
                document.getElementById('user-avatar').textContent = user.full_name
                    .split(' ')
                    .map(n => n[0])
                    .join('')
                    .toUpperCase();
                document.getElementById('user-tier').textContent = user.kyc_verified ? 'Verified Investor' : 'Standard Investor';
                
                // Update stats
                document.getElementById('total-balance').textContent = `${user.balance.toLocaleString()}`;
                document.getElementById('active-investments').textContent = `${stats.active_investment_value.toLocaleString()}`;
                document.getElementById('total-earnings').textContent = `${user.total_earnings.toLocaleString()}`;
                document.getElementById('referral-bonus').textContent = `${user.referral_earnings.toLocaleString()}`;
                
                // Load investments and transactions
                await this.loadUserInvestments();
                await this.loadUserTransactions();
                
                // Update charts
                this.createEarningsChart(stats);
                
            } catch (error) {
                console.error('Failed to update dashboard:', error);
            }
        },

        async loadUserInvestments() {
            try {
                const response = await this.apiRequest('/investments?status=active&limit=5');
                const investments = response.data.investments || [];
                const container = document.getElementById('active-investments-list');
                
                if (container) {
                    if (investments.length === 0) {
                        container.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No active investments</p>';
                    } else {
                        container.innerHTML = investments.map(inv => `
                            <div class="investment-item">
                                <div>
                                    <div class="investment-name">${inv.plan?.name || 'Unknown'} Plan</div>
                                    <div class="investment-status">Active - ${inv.remaining_days || 0} days remaining</div>
                                </div>
                                <div class="investment-amount">${inv.amount.toLocaleString()}</div>
                            </div>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load investments:', error);
            }
        },

        async loadUserTransactions() {
            try {
                const response = await this.apiRequest('/transactions?limit=10');
                const transactions = response.data.transactions || [];
                const container = document.getElementById('recent-transactions-list');
                
                if (container) {
                    if (transactions.length === 0) {
                        container.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No transactions yet</p>';
                    } else {
                        container.innerHTML = transactions.slice(0, 5).map(txn => {
                            const amountClass = txn.amount > 0 ? 'transaction-amount' : 'transaction-amount negative';
                            const amountSign = txn.amount > 0 ? '+' : '';
                            const icon = txn.type === 'deposit' ? 'fa-arrow-down' : 
                                       txn.type === 'withdrawal' ? 'fa-arrow-up' : 
                                       txn.type === 'investment' ? 'fa-chart-line' : 
                                       txn.type === 'earning' ? 'fa-coins' : 'fa-exchange-alt';
                            return `
                                <div class="transaction-item">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); 
                                                    display: flex; align-items: center; justify-content: center;">
                                            <i class="fas ${icon}" style="color: ${txn.amount > 0 ? 'var(--success)' : 'var(--accent-gold)'}"></i>
                                        </div>
                                        <div>
                                            <div class="transaction-type">${txn.description}</div>
                                            <div class="transaction-date">${new Date(txn.createdAt).toLocaleDateString()}</div>
                                        </div>
                                    </div>
                                    <div class="${amountClass}">${amountSign}${Math.abs(txn.amount).toLocaleString()}</div>
                                </div>
                            `;
                        }).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load transactions:', error);
            }
        },

        createEarningsChart(stats) {
            const ctx = document.getElementById('earnings-chart');
            if (!ctx) return;
            
            // Destroy existing chart
            if (this.state.charts.earnings) {
                this.state.charts.earnings.destroy();
            }
            
            // Sample data - in real app, get from API
            const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const earningsData = [12000, 19000, 15000, 25000, 22000, 30000, 28000];
            
            this.state.charts.earnings = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Daily Earnings',
                        data: earningsData,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true,
                        pointBackgroundColor: '#10b981',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8',
                                callback: function(value) {
                                    return '' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8'
                            }
                        }
                    }
                }
            });
        },

        // ==================== ENHANCED INVESTMENT CREATION ====================
        async handleInvestment(e) {
            e.preventDefault();
            
            if (!this.state.currentUser) {
                this.showToast('Please login to make an investment', 'error');
                this.showPage('login');
                return;
            }
            
            const planId = document.getElementById('investment-plan').value;
            const amount = parseFloat(document.getElementById('investment-amount').value);
            const autoRenew = document.getElementById('auto-renew').checked;
            const proofFile = document.getElementById('investment-proof').files[0];
            
            // Validation
            if (!planId) {
                this.showToast('Please select an investment plan', 'error');
                return;
            }
            
            const plan = this.state.investmentPlans.find(p => p._id === planId);
            if (!plan) {
                this.showToast('Invalid investment plan selected', 'error');
                return;
            }
            
            if (amount < plan.min_amount) {
                this.showToast(`Minimum investment for ${plan.name} is ${plan.min_amount.toLocaleString()}`, 'error');
                return;
            }
            
            if (amount > this.state.currentUser.balance) {
                this.showToast('Insufficient balance for this investment', 'error');
                return;
            }
            
            if (!proofFile) {
                this.showToast('Please upload payment proof', 'error');
                return;
            }
            
            this.setLoadingState('invest-btn', true);
            
            try {
                // Create FormData for file upload
                const formData = new FormData();
                formData.append('plan_id', planId);
                formData.append('amount', amount);
                formData.append('auto_renew', autoRenew);
                formData.append('payment_proof', proofFile);
                
                const response = await this.apiRequest('/investments', {
                    method: 'POST',
                    body: formData
                });
                
                this.showToast('Investment request submitted successfully!', 'success');
                this.setLoadingState('invest-btn', false);
                this.closeModal('invest-modal');
                
                // Update dashboard
                setTimeout(() => {
                    this.updateDashboard();
                }, 1000);
                
            } catch (error) {
                this.setLoadingState('invest-btn', false);
            }
        },

        // ==================== ENHANCED DEPOSIT HANDLING ====================
        async handleDeposit(e) {
            e.preventDefault();
            
            if (!this.state.currentUser) {
                this.showToast('Please login to make a deposit', 'error');
                this.showPage('login');
                return;
            }
            
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            const paymentMethod = document.getElementById('deposit-method').value;
            const proofFile = document.getElementById('deposit-proof').files[0];
            
            // Validation
            if (amount < this.config.MIN_DEPOSIT) {
                this.showToast(`Minimum deposit is ${this.config.MIN_DEPOSIT.toLocaleString()}`, 'error');
                return;
            }
            
            if (!paymentMethod) {
                this.showToast('Please select a payment method', 'error');
                return;
            }
            
            if (!proofFile) {
                this.showToast('Please upload payment proof', 'error');
                return;
            }
            
            this.setLoadingState('deposit-btn', true);
            
            try {
                const formData = new FormData();
                formData.append('amount', amount);
                formData.append('payment_method', paymentMethod);
                formData.append('payment_proof', proofFile);
                
                const response = await this.apiRequest('/deposits', {
                    method: 'POST',
                    body: formData
                });
                
                this.showToast('Deposit request submitted successfully!', 'success');
                this.setLoadingState('deposit-btn', false);
                this.closeModal('deposit-modal');
                
            } catch (error) {
                this.setLoadingState('deposit-btn', false);
            }
        },

        // ==================== ENHANCED WITHDRAWAL HANDLING ====================
        async handleWithdrawal(e) {
            e.preventDefault();
            
            if (!this.state.currentUser) {
                this.showToast('Please login to make a withdrawal', 'error');
                this.showPage('login');
                return;
            }
            
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const paymentMethod = document.getElementById('withdraw-method').value;
            
            // Validation
            if (amount < this.config.MIN_WITHDRAWAL) {
                this.showToast(`Minimum withdrawal is ${this.config.MIN_WITHDRAWAL.toLocaleString()}`, 'error');
                return;
            }
            
            if (amount > this.state.currentUser.balance) {
                this.showToast('Insufficient balance for withdrawal', 'error');
                return;
            }
            
            if (!paymentMethod) {
                this.showToast('Please select a withdrawal method', 'error');
                return;
            }
            
            this.setLoadingState('withdraw-btn', true);
            
            try {
                const response = await this.apiRequest('/withdrawals', {
                    method: 'POST',
                    body: {
                        amount: amount,
                        payment_method: paymentMethod
                    }
                });
                
                this.showToast('Withdrawal request submitted successfully!', 'success');
                this.setLoadingState('withdraw-btn', false);
                this.closeModal('withdraw-modal');
                
                // Update user balance display
                this.state.currentUser.balance -= amount;
                this.updateDashboard();
                
            } catch (error) {
                this.setLoadingState('withdraw-btn', false);
            }
        },

        updateWithdrawalFee() {
            const amountInput = document.getElementById('withdraw-amount');
            const feeNotice = document.getElementById('withdrawal-fee-notice');
            
            if (!amountInput || !feeNotice) return;
            
            const amount = parseFloat(amountInput.value) || 0;
            const fee = amount * (this.config.PLATFORM_FEE_PERCENT / 100);
            const netAmount = amount - fee;
            
            feeNotice.innerHTML = `
                Platform fee: ${fee.toLocaleString()} 
                (Net amount: ${netAmount.toLocaleString()})
            `;
        },

        // ==================== ENHANCED PROFILE MANAGEMENT ====================
        async loadProfileData() {
            if (!this.state.currentUser) return;
            
            try {
                const response = await this.apiRequest('/profile');
                const user = response.data.user;
                
                // Update personal info
                document.getElementById('profile-fullname').value = user.full_name;
                document.getElementById('profile-email').value = user.email;
                document.getElementById('profile-phone').value = user.phone || '';
                document.getElementById('profile-country').value = user.country || 'ng';
                
                // Update KYC status
                const kycStatusElement = document.getElementById('kyc-status-text');
                if (kycStatusElement) {
                    kycStatusElement.textContent = user.kyc_verified ? 'Verified' : user.kyc_status || 'Pending';
                    kycStatusElement.className = user.kyc_verified ? 'status-badge approved' : 'status-badge pending';
                }
                
                // Load bank details if available
                if (user.bank_details) {
                    document.getElementById('bank-name').value = user.bank_details.bank_name || '';
                    document.getElementById('account-name').value = user.bank_details.account_name || '';
                    document.getElementById('account-number').value = user.bank_details.account_number || '';
                }
                
            } catch (error) {
                console.error('Failed to load profile data:', error);
            }
        },

        async handleProfileUpdate(e) {
            e.preventDefault();
            
            const formData = {
                full_name: document.getElementById('profile-fullname').value.trim(),
                phone: document.getElementById('profile-phone').value.trim(),
                country: document.getElementById('profile-country').value
            };
            
            try {
                const response = await this.apiRequest('/profile', {
                    method: 'PUT',
                    body: formData
                });
                
                this.state.currentUser = response.data.user;
                this.showToast('Profile updated successfully!', 'success');
                
            } catch (error) {
                console.error('Failed to update profile:', error);
            }
        },

        async handleBankUpdate(e) {
            e.preventDefault();
            
            const formData = {
                bank_name: document.getElementById('bank-name').value.trim(),
                account_name: document.getElementById('account-name').value.trim(),
                account_number: document.getElementById('account-number').value.trim()
            };
            
            try {
                const response = await this.apiRequest('/profile/bank', {
                    method: 'PUT',
                    body: formData
                });
                
                this.showToast('Bank details updated successfully!', 'success');
                
            } catch (error) {
                console.error('Failed to update bank details:', error);
            }
        },

        // ==================== ENHANCED KYC SUBMISSION ====================
        async handleKYCSubmission(e) {
            e.preventDefault();
            
            const idType = document.getElementById('id-type').value;
            const idNumber = document.getElementById('id-number').value.trim();
            const idFrontFile = document.getElementById('id-front').files[0];
            const idBackFile = document.getElementById('id-back').files[0];
            const selfieFile = document.getElementById('selfie-with-id').files[0];
            
            // Validation
            if (!idType || !idNumber) {
                this.showToast('Please fill all required fields', 'error');
                return;
            }
            
            if (!idFrontFile || !selfieFile) {
                this.showToast('Please upload required documents', 'error');
                return;
            }
            
            this.setLoadingState('kyc-submit-btn', true);
            
            try {
                const formData = new FormData();
                formData.append('id_type', idType);
                formData.append('id_number', idNumber);
                formData.append('id_front', idFrontFile);
                if (idBackFile) formData.append('id_back', idBackFile);
                formData.append('selfie_with_id', selfieFile);
                
                const response = await this.apiRequest('/kyc', {
                    method: 'POST',
                    body: formData
                });
                
                this.showToast('KYC application submitted successfully!', 'success');
                this.setLoadingState('kyc-submit-btn', false);
                
                // Update KYC status
                document.getElementById('kyc-status-text').textContent = 'Pending';
                document.getElementById('kyc-status-text').className = 'status-badge pending';
                
                // Reset form
                e.target.reset();
                document.getElementById('id-front-preview').style.display = 'none';
                document.getElementById('id-back-preview').style.display = 'none';
                document.getElementById('selfie-with-id-preview').style.display = 'none';
                
            } catch (error) {
                this.setLoadingState('kyc-submit-btn', false);
            }
        },

        // ==================== ENHANCED REFERRAL SYSTEM ====================
        async loadReferralData() {
            if (!this.state.currentUser) return;
            
            try {
                const response = await this.apiRequest('/referrals/stats');
                const stats = response.data.stats;
                
                // Update referral link and code
                const baseUrl = window.location.origin;
                const referralLink = `${baseUrl}/register?ref=${this.state.currentUser.referral_code}`;
                
                document.getElementById('referral-link').value = referralLink;
                document.getElementById('referral-code').value = this.state.currentUser.referral_code;
                
                // Update stats
                document.getElementById('total-referrals').textContent = stats.total_referrals;
                document.getElementById('active-referrals').textContent = stats.active_referrals;
                document.getElementById('total-referral-earnings').textContent = `${stats.total_earnings.toLocaleString()}`;
                document.getElementById('pending-referral-earnings').textContent = `${stats.pending_earnings.toLocaleString()}`;
                
                // Load referral list
                await this.loadReferralList();
                
            } catch (error) {
                console.error('Failed to load referral data:', error);
            }
        },

        async loadReferralList() {
            try {
                const response = await this.apiRequest('/referrals/stats');
                const referrals = response.data.referrals || [];
                const container = document.getElementById('referral-list-container');
                
                if (container) {
                    if (referrals.length === 0) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                <i class="fas fa-user-friends" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <p>No referrals yet. Share your link to earn!</p>
                            </div>
                        `;
                    } else {
                        container.innerHTML = referrals.map(ref => `
                            <div class="referral-item" style="display: flex; justify-content: space-between; padding: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                <div>
                                    <div style="font-weight: 500;">${ref.referred_user?.full_name || 'Unknown User'}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-muted);">
                                        Joined: ${new Date(ref.createdAt).toLocaleDateString()}
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: var(--accent-gold);">
                                        ${ref.earnings?.toLocaleString() || '0'}
                                    </div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">
                                        ${ref.status || 'Pending'}
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load referral list:', error);
            }
        },

        copyReferralLink() {
            const linkInput = document.getElementById('referral-link');
            linkInput.select();
            document.execCommand('copy');
            this.showToast('Referral link copied to clipboard!', 'success');
        },

        copyReferralCode() {
            const codeInput = document.getElementById('referral-code');
            codeInput.select();
            document.execCommand('copy');
            this.showToast('Referral code copied to clipboard!', 'success');
        },

        checkReferralFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const referralCode = urlParams.get('ref');
            
            if (referralCode && document.getElementById('referral')) {
                document.getElementById('referral').value = referralCode;
            }
        },

        // ==================== ENHANCED SUPPORT SYSTEM ====================
        async handleSupportRequest(e) {
            e.preventDefault();
            
            const formData = {
                subject: document.getElementById('support-subject').value.trim(),
                category: document.getElementById('support-category').value,
                message: document.getElementById('support-message').value.trim()
            };
            
            try {
                const response = await this.apiRequest('/support', {
                    method: 'POST',
                    body: formData
                });
                
                this.showToast('Support ticket submitted successfully!', 'success');
                e.target.reset();
                
            } catch (error) {
                console.error('Failed to submit support ticket:', error);
            }
        },

        // ==================== ENHANCED ADMIN FUNCTIONS ====================
        async updateAdminDashboard() {
            if (!this.state.isAdmin) return;
            
            try {
                const response = await this.apiRequest('/admin/dashboard');
                const stats = response.data.stats;
                
                // Update admin stats
                document.getElementById('admin-total-users').textContent = stats.overview?.total_users || 0;
                document.getElementById('admin-total-invested').textContent = `${(stats.overview?.total_investments || 0).toLocaleString()}`;
                document.getElementById('admin-total-withdrawn').textContent = `${(stats.overview?.total_withdrawals || 0).toLocaleString()}`;
                document.getElementById('admin-pending-requests').textContent = stats.pending_actions?.total_pending || 0;
                document.getElementById('admin-platform-earnings').textContent = `${(stats.overview?.platform_revenue || 0).toLocaleString()}`;
                document.getElementById('admin-active-investments').textContent = stats.overview?.active_investments || 0;
                
                // Load admin data
                await this.loadAdminUsers();
                await this.loadAdminInvestments();
                await this.loadAdminDeposits();
                await this.loadAdminWithdrawals();
                await this.loadAdminKYC();
                
                // Update platform growth chart
                this.createPlatformGrowthChart(stats);
                
            } catch (error) {
                console.error('Failed to update admin dashboard:', error);
            }
        },

        async loadAdminUsers() {
            try {
                const response = await this.apiRequest('/admin/users?limit=20');
                const users = response.data.users || [];
                this.state.adminData.users = users;
                const table = document.getElementById('admin-users-table');
                
                if (table) {
                    if (users.length === 0) {
                        table.innerHTML = `
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    No users found
                                </td>
                            </tr>
                        `;
                    } else {
                        table.innerHTML = users.map(user => `
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-emerald); 
                                                    display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                            ${user.full_name?.charAt(0) || 'U'}
                                        </div>
                                        <div>
                                            <div style="font-weight: 500;">${user.full_name || 'Unknown User'}</div>
                                            <div style="font-size: 0.8rem; color: var(--text-muted);">${user.email || ''}</div>
                                        </div>
                                    </div>
                                </td>
                                <td>${user.email || 'N/A'}</td>
                                <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                                <td>
                                    <span class="status-badge ${user.kyc_verified ? 'approved' : 'pending'}">
                                        ${user.kyc_verified ? 'Verified' : 'Pending'}
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge ${user.is_active ? 'approved' : 'rejected'}">
                                        ${user.is_active ? 'Active' : 'Inactive'}
                                    </span>
                                </td>
                                <td style="font-weight: 600; color: var(--accent-gold);">
                                    ${(user.balance || 0).toLocaleString()}
                                </td>
                                <td>
                                    <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                        <button class="btn btn-outline" 
                                                onclick="app.viewUserDetails('${user._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-outline" 
                                                onclick="app.editUser('${user._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--info); color: white; border-color: var(--info);">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        ${this.state.isSuperAdmin ? `
                                            <button class="btn btn-outline" 
                                                    onclick="app.toggleUserStatus('${user._id}', ${!user.is_active})"
                                                    style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: ${user.is_active ? 'var(--error)' : 'var(--success)'}; color: white; border-color: ${user.is_active ? 'var(--error)' : 'var(--success)'};">
                                                <i class="fas fa-${user.is_active ? 'ban' : 'check'}"></i>
                                            </button>
                                        ` : ''}
                                    </div>
                                </td>
                            </tr>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load admin users:', error);
                const table = document.getElementById('admin-users-table');
                if (table) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 2rem; color: var(--error);">
                                Error loading users. Please try again.
                            </td>
                        </tr>
                    `;
                }
            }
        },

        async loadAdminInvestments() {
            try {
                const response = await this.apiRequest('/admin/pending-investments');
                const investments = response.data.investments || [];
                this.state.adminData.pendingInvestments = investments;
                const table = document.getElementById('admin-investments-table');
                
                if (table) {
                    if (investments.length === 0) {
                        table.innerHTML = `
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    No pending investments
                                </td>
                            </tr>
                        `;
                    } else {
                        table.innerHTML = investments.map(inv => `
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-emerald); 
                                                    display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                            ${inv.user?.full_name?.charAt(0) || 'U'}
                                        </div>
                                        <div>
                                            <div style="font-weight: 500;">${inv.user?.full_name || 'Unknown User'}</div>
                                            <div style="font-size: 0.8rem; color: var(--text-muted);">${inv.user?.email || ''}</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div style="font-weight: 500;">${inv.plan?.name || 'Unknown Plan'}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">
                                        Daily: ${inv.plan?.daily_interest || 0}%
                                    </div>
                                </td>
                                <td style="font-weight: 600; color: var(--accent-gold);">
                                    ${inv.amount.toLocaleString()}
                                </td>
                                <td>${new Date(inv.createdAt).toLocaleDateString()}</td>
                                <td>
                                    <span class="status-badge ${inv.status || 'pending'}">
                                        ${inv.status || 'Pending'}
                                    </span>
                                </td>
                                <td>
                                    ${inv.payment_proof_url ? 
                                        `<button class="btn btn-outline" 
                                            onclick="app.viewProofImage('${inv.payment_proof_url}', 
                                            'Investment Proof - ${inv.plan?.name}', 
                                            { 
                                                userName: '${inv.user?.full_name || ''}', 
                                                amount: ${inv.amount}, 
                                                date: '${inv.createdAt}',
                                                type: 'investment'
                                            })"
                                            style="padding: 0.3rem 0.8rem; font-size: 0.8rem; display: flex; align-items: center; gap: 5px;">
                                            <i class="fas fa-image"></i> View Proof
                                        </button>` 
                                        : 
                                        `<span style="color: var(--text-muted); font-size: 0.8rem;">No proof</span>`
                                    }
                                </td>
                                <td>
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                onclick="app.approveInvestment('${inv._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--success); color: white; border-color: var(--success);">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                onclick="app.rejectInvestment('${inv._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white; border-color: var(--error);">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load admin investments:', error);
                const table = document.getElementById('admin-investments-table');
                if (table) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 2rem; color: var(--error);">
                                Error loading investments. Please try again.
                            </td>
                        </tr>
                    `;
                }
            }
        },

        async loadAdminDeposits() {
            try {
                const response = await this.apiRequest('/admin/pending-deposits');
                const deposits = response.data.deposits || [];
                this.state.adminData.pendingDeposits = deposits;
                const table = document.getElementById('admin-deposits-table');
                
                if (table) {
                    if (deposits.length === 0) {
                        table.innerHTML = `
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    No pending deposits
                                </td>
                            </tr>
                        `;
                    } else {
                        table.innerHTML = deposits.map(deposit => `
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-blue); 
                                                    display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                            ${deposit.user?.full_name?.charAt(0) || 'U'}
                                        </div>
                                        <div>
                                            <div style="font-weight: 500;">${deposit.user?.full_name || 'Unknown User'}</div>
                                            <div style="font-size: 0.8rem; color: var(--text-muted);">${deposit.user?.email || ''}</div>
                                        </div>
                                    </div>
                                </td>
                                <td style="font-weight: 600; color: var(--accent-gold);">
                                    ${deposit.amount.toLocaleString()}
                                </td>
                                <td>
                                    <span style="padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.8rem;
                                            background: ${deposit.payment_method === 'bank_transfer' ? 'rgba(59, 130, 246, 0.1)' : 
                                                        deposit.payment_method === 'crypto' ? 'rgba(139, 92, 246, 0.1)' : 
                                                        deposit.payment_method === 'paypal' ? 'rgba(0, 102, 204, 0.1)' : 'rgba(107, 114, 128, 0.1)'};
                                            color: ${deposit.payment_method === 'bank_transfer' ? 'rgb(59, 130, 246)' : 
                                                    deposit.payment_method === 'crypto' ? 'rgb(139, 92, 246)' : 
                                                    deposit.payment_method === 'paypal' ? 'rgb(0, 102, 204)' : 'rgb(107, 114, 128)'}">
                                        ${deposit.payment_method || 'Unknown'}
                                    </span>
                                </td>
                                <td>${new Date(deposit.createdAt).toLocaleDateString()}</td>
                                <td>
                                    <span class="status-badge ${deposit.status || 'pending'}">
                                        ${deposit.status || 'Pending'}
                                    </span>
                                </td>
                                <td>
                                    ${deposit.payment_proof_url ? 
                                        `<button class="btn btn-outline" 
                                            onclick="app.viewProofImage('${deposit.payment_proof_url}', 
                                            'Deposit Proof - ${deposit.payment_method}', 
                                            { 
                                                userName: '${deposit.user?.full_name || ''}', 
                                                amount: ${deposit.amount}, 
                                                date: '${deposit.createdAt}',
                                                method: '${deposit.payment_method}',
                                                type: 'deposit'
                                            })"
                                            style="padding: 0.3rem 0.8rem; font-size: 0.8rem; display: flex; align-items: center; gap: 5px;">
                                            <i class="fas fa-image"></i> View Proof
                                        </button>` 
                                        : 
                                        `<span style="color: var(--text-muted); font-size: 0.8rem;">No proof</span>`
                                    }
                                </td>
                                <td>
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                onclick="app.approveDeposit('${deposit._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--success); color: white; border-color: var(--success);">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                onclick="app.rejectDeposit('${deposit._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white; border-color: var(--error);">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load admin deposits:', error);
                const table = document.getElementById('admin-deposits-table');
                if (table) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 2rem; color: var(--error);">
                                Error loading deposits. Please try again.
                            </td>
                        </tr>
                    `;
                }
            }
        },

        async loadAdminWithdrawals() {
            try {
                const response = await this.apiRequest('/admin/pending-withdrawals');
                const withdrawals = response.data.withdrawals || [];
                this.state.adminData.pendingWithdrawals = withdrawals;
                const table = document.getElementById('admin-withdrawals-table');
                
                if (table) {
                    if (withdrawals.length === 0) {
                        table.innerHTML = `
                            <tr>
                                <td colspan="10" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    No pending withdrawals
                                </td>
                            </tr>
                        `;
                    } else {
                        table.innerHTML = withdrawals.map(withdrawal => `
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-purple); 
                                                    display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                            ${withdrawal.user?.full_name?.charAt(0) || 'U'}
                                        </div>
                                        <div>
                                            <div style="font-weight: 500;">${withdrawal.user?.full_name || 'Unknown User'}</div>
                                            <div style="font-size: 0.8rem; color: var(--text-muted);">${withdrawal.user?.email || ''}</div>
                                        </div>
                                    </div>
                                </td>
                                <td style="font-weight: 600; color: var(--accent-gold);">
                                    ${withdrawal.amount.toLocaleString()}
                                </td>
                                <td>
                                    <span style="padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.8rem;
                                            background: ${withdrawal.payment_method === 'bank_transfer' ? 'rgba(59, 130, 246, 0.1)' : 
                                                        withdrawal.payment_method === 'crypto' ? 'rgba(139, 92, 246, 0.1)' : 
                                                        'rgba(107, 114, 128, 0.1)'};
                                            color: ${withdrawal.payment_method === 'bank_transfer' ? 'rgb(59, 130, 246)' : 
                                                    withdrawal.payment_method === 'crypto' ? 'rgb(139, 92, 246)' : 
                                                    'rgb(107, 114, 128)'}">
                                        ${withdrawal.payment_method || 'Unknown'}
                                    </span>
                                </td>
                                <td style="color: var(--warning);">
                                    ${withdrawal.platform_fee?.toLocaleString() || '0'}
                                </td>
                                <td style="font-weight: 600; color: var(--success);">
                                    ${withdrawal.net_amount?.toLocaleString() || withdrawal.amount.toLocaleString()}
                                </td>
                                <td>${new Date(withdrawal.createdAt).toLocaleDateString()}</td>
                                <td>
                                    <span class="status-badge ${withdrawal.status || 'pending'}">
                                        ${withdrawal.status || 'Pending'}
                                    </span>
                                </td>
                                <td>
                                    ${withdrawal.transaction_id ? 
                                        `<span style="color: var(--text-muted); font-size: 0.8rem;">${withdrawal.transaction_id}</span>` 
                                        : 
                                        `<span style="color: var(--text-muted); font-size: 0.8rem;">No TXN ID</span>`
                                    }
                                </td>
                                <td>
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                onclick="app.approveWithdrawal('${withdrawal._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--success); color: white; border-color: var(--success);">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                onclick="app.rejectWithdrawal('${withdrawal._id}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white; border-color: var(--error);">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load admin withdrawals:', error);
                const table = document.getElementById('admin-withdrawals-table');
                if (table) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="10" style="text-align: center; padding: 2rem; color: var(--error);">
                                Error loading withdrawals. Please try again.
                            </td>
                        </tr>
                    `;
                }
            }
        },

        async loadAdminKYC() {
            try {
                const response = await this.apiRequest('/admin/pending-kyc');
                const kycSubmissions = response.data.kyc_submissions || [];
                this.state.adminData.pendingKYC = kycSubmissions;
                const container = document.getElementById('admin-kyc-container');
                
                if (container) {
                    if (kycSubmissions.length === 0) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                <i class="fas fa-id-card" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <p>No pending KYC submissions</p>
                            </div>
                        `;
                    } else {
                        container.innerHTML = kycSubmissions.map(kyc => `
                            <div class="admin-kyc-item" style="background: var(--secondary); padding: 1.5rem; border-radius: 10px; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <h4 style="margin-bottom: 0.5rem;">${kyc.user?.full_name || 'Unknown User'}</h4>
                                        <p style="color: var(--text-muted); margin-bottom: 0.2rem;">${kyc.id_type} - ${kyc.id_number}</p>
                                        <p style="color: var(--text-muted); font-size: 0.9rem;">
                                            Submitted: ${new Date(kyc.createdAt).toLocaleDateString()}
                                        </p>
                                    </div>
                                    <span class="status-badge ${kyc.status || 'pending'}">
                                        ${kyc.status || 'Pending'}
                                    </span>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">ID Front:</p>
                                        ${kyc.id_front_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.id_front_url}', 'ID Front - ${kyc.user?.full_name}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">ID Back:</p>
                                        ${kyc.id_back_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.id_back_url}', 'ID Back - ${kyc.user?.full_name}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">Selfie with ID:</p>
                                        ${kyc.selfie_with_id_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.selfie_with_id_url}', 'Selfie with ID - ${kyc.user?.full_name}')"
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                                    <button class="btn btn-outline" 
                                            onclick="app.approveKYC('${kyc._id}')"
                                            style="padding: 0.5rem 1rem; background: var(--success); color: white; border-color: var(--success);">
                                        <i class="fas fa-check"></i> Approve KYC
                                    </button>
                                    <button class="btn btn-outline" 
                                            onclick="app.rejectKYC('${kyc._id}')"
                                            style="padding: 0.5rem 1rem; background: var(--error); color: white; border-color: var(--error);">
                                        <i class="fas fa-times"></i> Reject KYC
                                    </button>
                                </div>
                            </div>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Failed to load admin KYC:', error);
            }
        },

        // ==================== ADMIN APPROVAL FUNCTIONS ====================
        async approveInvestment(investmentId) {
            if (!confirm('Approve this investment?')) return;
            
            try {
                await this.apiRequest(`/admin/investments/${investmentId}/approve`, {
                    method: 'POST',
                    body: { remarks: 'Investment approved by admin' }
                });
                
                this.showToast('Investment approved successfully!', 'success');
                this.loadAdminInvestments();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to approve investment:', error);
            }
        },

        async rejectInvestment(investmentId) {
            const reason = prompt('Enter rejection reason:');
            if (!reason) return;
            
            try {
                await this.apiRequest(`/admin/investments/${investmentId}/reject`, {
                    method: 'POST',
                    body: { remarks: reason }
                });
                
                this.showToast('Investment rejected!', 'success');
                this.loadAdminInvestments();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to reject investment:', error);
            }
        },

        async approveDeposit(depositId) {
            if (!confirm('Approve this deposit?')) return;
            
            try {
                await this.apiRequest(`/admin/deposits/${depositId}/approve`, {
                    method: 'POST',
                    body: { remarks: 'Deposit approved by admin' }
                });
                
                this.showToast('Deposit approved successfully!', 'success');
                this.loadAdminDeposits();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to approve deposit:', error);
            }
        },

        async rejectDeposit(depositId) {
            const reason = prompt('Enter rejection reason:');
            if (!reason) return;
            
            try {
                await this.apiRequest(`/admin/deposits/${depositId}/reject`, {
                    method: 'POST',
                    body: { remarks: reason }
                });
                
                this.showToast('Deposit rejected!', 'success');
                this.loadAdminDeposits();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to reject deposit:', error);
            }
        },

        async approveWithdrawal(withdrawalId) {
            const transactionId = prompt('Enter transaction ID (optional):');
            
            try {
                await this.apiRequest(`/admin/withdrawals/${withdrawalId}/approve`, {
                    method: 'POST',
                    body: { 
                        transaction_id: transactionId || '',
                        remarks: 'Withdrawal approved by admin'
                    }
                });
                
                this.showToast('Withdrawal approved successfully!', 'success');
                this.loadAdminWithdrawals();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to approve withdrawal:', error);
            }
        },

        async rejectWithdrawal(withdrawalId) {
            const reason = prompt('Enter rejection reason:');
            if (!reason) return;
            
            try {
                await this.apiRequest(`/admin/withdrawals/${withdrawalId}/reject`, {
                    method: 'POST',
                    body: { remarks: reason }
                });
                
                this.showToast('Withdrawal rejected!', 'success');
                this.loadAdminWithdrawals();
                this.updateAdminDashboard();
            } catch (error) {
                console.error('Failed to reject withdrawal:', error);
            }
        },

        async approveKYC(kycId) {
            if (!confirm('Approve this KYC submission?')) return;
            
            try {
                await this.apiRequest(`/admin/kyc/${kycId}/approve`, {
                    method: 'POST',
                    body: { remarks: 'KYC approved by admin' }
                });
                
                this.showToast('KYC approved successfully!', 'success');
                this.loadAdminKYC();
                this.loadAdminUsers();
            } catch (error) {
                console.error('Failed to approve KYC:', error);
            }
        },

        async rejectKYC(kycId) {
            const reason = prompt('Enter rejection reason:');
            if (!reason) return;
            
            try {
                await this.apiRequest(`/admin/kyc/${kycId}/reject`, {
                    method: 'POST',
                    body: { rejection_reason: reason }
                });
                
                this.showToast('KYC rejected!', 'success');
                this.loadAdminKYC();
                this.loadAdminUsers();
            } catch (error) {
                console.error('Failed to reject KYC:', error);
            }
        },

        // ==================== ENHANCED USER MANAGEMENT ====================
        async viewUserDetails(userId) {
            try {
                const response = await this.apiRequest(`/admin/users/${userId}`);
                const user = response.data.user;
                const stats = response.data.statistics;
                
                // Create modal content
                const modalContent = `
                    <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                        <div class="modal-header">
                            <h2>User Details: ${user.full_name}</h2>
                            <button class="close-modal" onclick="app.closeModal('user-details-modal')">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                <div>
                                    <h3 style="margin-bottom: 1rem;">Personal Information</h3>
                                    <div style="background: var(--secondary); padding: 1rem; border-radius: 8px;">
                                        <p><strong>Email:</strong> ${user.email}</p>
                                        <p><strong>Phone:</strong> ${user.phone || 'N/A'}</p>
                                        <p><strong>Country:</strong> ${user.country || 'N/A'}</p>
                                        <p><strong>Joined:</strong> ${new Date(user.createdAt).toLocaleDateString()}</p>
                                        <p><strong>Last Login:</strong> ${user.last_login ? new Date(user.last_login).toLocaleDateString() : 'Never'}</p>
                                        <p><strong>Referral Code:</strong> ${user.referral_code || 'N/A'}</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 style="margin-bottom: 1rem;">Account Status</h3>
                                    <div style="background: var(--secondary); padding: 1rem; border-radius: 8px;">
                                        <p><strong>Role:</strong> <span class="status-badge ${user.role}">${user.role}</span></p>
                                        <p><strong>Status:</strong> <span class="status-badge ${user.is_active ? 'approved' : 'rejected'}">${user.is_active ? 'Active' : 'Inactive'}</span></p>
                                        <p><strong>KYC Status:</strong> <span class="status-badge ${user.kyc_verified ? 'approved' : 'pending'}">${user.kyc_verified ? 'Verified' : user.kyc_status || 'Pending'}</span></p>
                                        <p><strong>2FA:</strong> <span class="status-badge ${user.two_factor_enabled ? 'approved' : 'pending'}">${user.two_factor_enabled ? 'Enabled' : 'Disabled'}</span></p>
                                        <p><strong>Email Verified:</strong> <span class="status-badge ${user.is_verified ? 'approved' : 'pending'}">${user.is_verified ? 'Yes' : 'No'}</span></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                <div style="background: var(--accent-gold); padding: 1rem; border-radius: 8px; color: var(--primary);">
                                    <p style="font-size: 0.9rem; opacity: 0.9;">Balance</p>
                                    <p style="font-size: 1.5rem; font-weight: bold;">${user.balance?.toLocaleString() || '0'}</p>
                                </div>
                                <div style="background: var(--accent-emerald); padding: 1rem; border-radius: 8px; color: var(--primary);">
                                    <p style="font-size: 0.9rem; opacity: 0.9;">Total Earnings</p>
                                    <p style="font-size: 1.5rem; font-weight: bold;">${user.total_earnings?.toLocaleString() || '0'}</p>
                                </div>
                                <div style="background: var(--accent-blue); padding: 1rem; border-radius: 8px; color: var(--primary);">
                                    <p style="font-size: 0.9rem; opacity: 0.9;">Referral Earnings</p>
                                    <p style="font-size: 1.5rem; font-weight: bold;">${user.referral_earnings?.toLocaleString() || '0'}</p>
                                </div>
                                <div style="background: var(--accent-purple); padding: 1rem; border-radius: 8px; color: var(--primary);">
                                    <p style="font-size: 0.9rem; opacity: 0.9;">Portfolio Value</p>
                                    <p style="font-size: 1.5rem; font-weight: bold;">${(user.balance + (user.total_earnings || 0) + (user.referral_earnings || 0)).toLocaleString()}</p>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <h3 style="margin-bottom: 1rem;">User Statistics</h3>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                                    <div style="text-align: center; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                                        <p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-gold);">${stats?.total_investments || 0}</p>
                                        <p style="font-size: 0.8rem; color: var(--text-muted);">Investments</p>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                                        <p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-gold);">${stats?.active_investments || 0}</p>
                                        <p style="font-size: 0.8rem; color: var(--text-muted);">Active</p>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                                        <p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-gold);">${stats?.total_deposits || 0}</p>
                                        <p style="font-size: 0.8rem; color: var(--text-muted);">Deposits</p>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                                        <p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-gold);">${stats?.total_referrals || 0}</p>
                                        <p style="font-size: 0.8rem; color: var(--text-muted);">Referrals</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                <button class="btn btn-outline" onclick="app.editUser('${user._id}')">
                                    <i class="fas fa-edit"></i> Edit User
                                </button>
                                ${this.state.isSuperAdmin ? `
                                    <button class="btn btn-outline" onclick="app.toggleUserStatus('${user._id}', ${!user.is_active})" 
                                            style="background: ${user.is_active ? 'var(--error)' : 'var(--success)'}; color: white; border-color: ${user.is_active ? 'var(--error)' : 'var(--success)'};">
                                        <i class="fas fa-${user.is_active ? 'ban' : 'check'}"></i> ${user.is_active ? 'Deactivate' : 'Activate'}
                                    </button>
                                    <button class="btn btn-outline" onclick="app.adjustUserBalance('${user._id}')" 
                                            style="background: var(--accent-gold); color: var(--primary); border-color: var(--accent-gold);">
                                        <i class="fas fa-coins"></i> Adjust Balance
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
                
                // Create or update modal
                let modal = document.getElementById('user-details-modal');
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = 'user-details-modal';
                    modal.className = 'modal';
                    document.body.appendChild(modal);
                }
                
                modal.innerHTML = modalContent;
                modal.style.display = 'flex';
                
            } catch (error) {
                console.error('Failed to load user details:', error);
                this.showToast('Failed to load user details', 'error');
            }
        },

        async editUser(userId) {
            try {
                const response = await this.apiRequest(`/admin/users/${userId}`);
                const user = response.data.user;
                
                // Create modal content
                const modalContent = `
                    <div class="modal-content" style="max-width: 500px;">
                        <div class="modal-header">
                            <h2>Edit User: ${user.full_name}</h2>
                            <button class="close-modal" onclick="app.closeModal('edit-user-modal')">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="edit-user-form" onsubmit="app.saveUserChanges('${userId}', event)">
                                <div class="form-group">
                                    <label for="edit-user-role">Role</label>
                                    <select id="edit-user-role" class="form-control">
                                        <option value="user" ${user.role === 'user' ? 'selected' : ''}>User</option>
                                        <option value="admin" ${user.role === 'admin' ? 'selected' : ''}>Admin</option>
                                        ${this.state.isSuperAdmin ? `<option value="super_admin" ${user.role === 'super_admin' ? 'selected' : ''}>Super Admin</option>` : ''}
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-user-status">Account Status</label>
                                    <select id="edit-user-status" class="form-control">
                                        <option value="true" ${user.is_active ? 'selected' : ''}>Active</option>
                                        <option value="false" ${!user.is_active ? 'selected' : ''}>Inactive</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-user-kyc">KYC Status</label>
                                    <select id="edit-user-kyc" class="form-control">
                                        <option value="verified" ${user.kyc_verified ? 'selected' : ''}>Verified</option>
                                        <option value="pending" ${!user.kyc_verified && user.kyc_status === 'pending' ? 'selected' : ''}>Pending</option>
                                        <option value="rejected" ${user.kyc_status === 'rejected' ? 'selected' : ''}>Rejected</option>
                                        <option value="not_submitted" ${user.kyc_status === 'not_submitted' ? 'selected' : ''}>Not Submitted</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-user-email-verified">Email Verified</label>
                                    <select id="edit-user-email-verified" class="form-control">
                                        <option value="true" ${user.is_verified ? 'selected' : ''}>Yes</option>
                                        <option value="false" ${!user.is_verified ? 'selected' : ''}>No</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-user-notes">Admin Notes</label>
                                    <textarea id="edit-user-notes" class="form-control" rows="3" placeholder="Add notes about this user..."></textarea>
                                </div>
                                
                                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                                        <i class="fas fa-save"></i> Save Changes
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="app.closeModal('edit-user-modal')" style="flex: 1;">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                // Create or update modal
                let modal = document.getElementById('edit-user-modal');
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = 'edit-user-modal';
                    modal.className = 'modal';
                    document.body.appendChild(modal);
                }
                
                modal.innerHTML = modalContent;
                modal.style.display = 'flex';
                
            } catch (error) {
                console.error('Failed to load user for editing:', error);
                this.showToast('Failed to load user details', 'error');
            }
        },

        async saveUserChanges(userId, e) {
            e.preventDefault();
            
            const role = document.getElementById('edit-user-role').value;
            const isActive = document.getElementById('edit-user-status').value === 'true';
            const kycStatus = document.getElementById('edit-user-kyc').value;
            const isVerified = document.getElementById('edit-user-email-verified').value === 'true';
            const notes = document.getElementById('edit-user-notes').value;
            
            try {
                // Update role if changed
                if (role) {
                    await this.apiRequest(`/admin/users/${userId}/role`, {
                        method: 'PUT',
                        body: { role }
                    });
                }
                
                // Update status if changed
                await this.apiRequest(`/admin/users/${userId}/status`, {
                    method: 'PUT',
                    body: { is_active: isActive }
                });
                
                // Update KYC status
                if (kycStatus === 'verified') {
                    // We would need a KYC approval endpoint here
                    this.showToast('User updated successfully! Note: KYC approval requires separate action.', 'success');
                }
                
                this.showToast('User updated successfully!', 'success');
                this.closeModal('edit-user-modal');
                this.loadAdminUsers();
                
            } catch (error) {
                console.error('Failed to update user:', error);
                this.showToast('Failed to update user', 'error');
            }
        },

        async toggleUserStatus(userId, activate) {
            const action = activate ? 'activate' : 'deactivate';
            if (!confirm(`Are you sure you want to ${action} this user?`)) return;
            
            try {
                await this.apiRequest(`/admin/users/${userId}/status`, {
                    method: 'PUT',
                    body: { is_active: activate }
                });
                
                this.showToast(`User ${activate ? 'activated' : 'deactivated'} successfully!`, 'success');
                this.loadAdminUsers();
                
            } catch (error) {
                console.error('Failed to toggle user status:', error);
                this.showToast('Failed to update user status', 'error');
            }
        },

        async adjustUserBalance(userId) {
            const amount = prompt('Enter amount to adjust (positive to add, negative to subtract):');
            if (amount === null) return;
            
            const type = parseFloat(amount) > 0 ? 'add' : 'subtract';
            const description = prompt('Enter description for this adjustment:') || 'Admin balance adjustment';
            
            try {
                await this.apiRequest(`/admin/users/${userId}/balance`, {
                    method: 'PUT',
                    body: {
                        amount: Math.abs(parseFloat(amount)),
                        type: type,
                        description: description
                    }
                });
                
                this.showToast('User balance adjusted successfully!', 'success');
                this.loadAdminUsers();
                
            } catch (error) {
                console.error('Failed to adjust user balance:', error);
                this.showToast('Failed to adjust balance', 'error');
            }
        },

        searchUsers(query) {
            const table = document.getElementById('admin-users-table');
            if (!table || !this.state.adminData.users) return;
            
            if (!query.trim()) {
                this.loadAdminUsers();
                return;
            }
            
            const filteredUsers = this.state.adminData.users.filter(user => 
                user.full_name?.toLowerCase().includes(query.toLowerCase()) ||
                user.email?.toLowerCase().includes(query.toLowerCase()) ||
                user.phone?.includes(query) ||
                user.referral_code?.toLowerCase().includes(query.toLowerCase())
            );
            
            if (filteredUsers.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            No users found matching "${query}"
                        </td>
                    </tr>
                `;
            } else {
                // Render filtered users (same as loadAdminUsers but with filtered data)
                table.innerHTML = filteredUsers.map(user => `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-emerald); 
                                            display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                    ${user.full_name?.charAt(0) || 'U'}
                                </div>
                                <div>
                                    <div style="font-weight: 500;">${user.full_name || 'Unknown User'}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">${user.email || ''}</div>
                                </div>
                            </div>
                        </td>
                        <td>${user.email || 'N/A'}</td>
                        <td>${new Date(user.createdAt).toLocaleDateString()}</td>
                        <td>
                            <span class="status-badge ${user.kyc_verified ? 'approved' : 'pending'}">
                                ${user.kyc_verified ? 'Verified' : 'Pending'}
                            </span>
                        </td>
                        <td>
                            <span class="status-badge ${user.is_active ? 'approved' : 'rejected'}">
                                ${user.is_active ? 'Active' : 'Inactive'}
                            </span>
                        </td>
                        <td style="font-weight: 600; color: var(--accent-gold);">
                            ${(user.balance || 0).toLocaleString()}
                        </td>
                        <td>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                <button class="btn btn-outline" 
                                        onclick="app.viewUserDetails('${user._id}')"
                                        style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-outline" 
                                        onclick="app.editUser('${user._id}')"
                                        style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--info); color: white; border-color: var(--info);">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }
        },

        // ==================== ENHANCED IMAGE VIEWING ====================
        initImageModal() {
            // Create image modal if it doesn't exist
            if (!document.getElementById('image-proof-modal')) {
                const modal = document.createElement('div');
                modal.id = 'image-proof-modal';
                modal.className = 'modal';
                modal.innerHTML = `
                    <div class="modal-content" style="max-width: 90%; max-height: 90vh;">
                        <div class="modal-header">
                            <h2 id="image-proof-title">Proof Image</h2>
                            <button class="close-modal" onclick="app.closeImageModal()">&times;</button>
                        </div>
                        <div class="modal-body" style="padding: 1rem; display: flex; flex-direction: column; height: calc(90vh - 80px);">
                            <div style="margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-outline" onclick="app.zoomImage('in')">
                                    <i class="fas fa-search-plus"></i> Zoom In
                                </button>
                                <button class="btn btn-outline" onclick="app.zoomImage('out')">
                                    <i class="fas fa-search-minus"></i> Zoom Out
                                </button>
                                <button class="btn btn-outline" onclick="app.rotateImage()">
                                    <i class="fas fa-redo"></i> Rotate
                                </button>
                                <button class="btn btn-outline" onclick="app.resetImage()">
                                    <i class="fas fa-sync-alt"></i> Reset
                                </button>
                                <button class="btn btn-primary" onclick="app.downloadProofImage()">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                            <div style="flex: 1; overflow: auto; display: flex; justify-content: center; align-items: center;">
                                <img id="proof-image" src="" alt="Proof Image" 
                                     style="max-width: 100%; max-height: 100%; transition: transform 0.3s;">
                            </div>
                            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                <div id="image-metadata" style="color: var(--text-muted); font-size: 0.9rem;"></div>
                                <a id="image-download-link" href="#" target="_blank" style="display: none; margin-top: 0.5rem;">
                                    Open in new tab
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        },

        viewProofImage(imageUrl, title = 'Proof Image', metadata = {}) {
            if (!imageUrl) {
                this.showToast('No proof image available', 'warning');
                return;
            }

            const modal = document.getElementById('image-proof-modal');
            const imageElement = document.getElementById('proof-image');
            const titleElement = document.getElementById('image-proof-title');
            const metadataElement = document.getElementById('image-metadata');
            const downloadLink = document.getElementById('image-download-link');
            
            // Reset image transformations
            this.state.currentImageRotation = 0;
            this.state.currentImageScale = 1;
            
            // Construct full URL
            const fullImageUrl = this.config.SERVER_URL + imageUrl;
            
            // Set image
            imageElement.src = fullImageUrl;
            imageElement.style.transform = 'scale(1) rotate(0deg)';
            
            // Set title
            titleElement.textContent = title;
            
            // Set metadata
            let metadataHTML = '';
            if (metadata.userName) metadataHTML += `<div><strong>User:</strong> ${metadata.userName}</div>`;
            if (metadata.amount) metadataHTML += `<div><strong>Amount:</strong> ${metadata.amount.toLocaleString()}</div>`;
            if (metadata.date) metadataHTML += `<div><strong>Date:</strong> ${new Date(metadata.date).toLocaleString()}</div>`;
            if (metadata.method) metadataHTML += `<div><strong>Method:</strong> ${metadata.method}</div>`;
            if (metadata.type) metadataHTML += `<div><strong>Type:</strong> ${metadata.type}</div>`;
            
            metadataElement.innerHTML = metadataHTML || '<div>No additional information</div>';
            
            // Set download link
            downloadLink.href = fullImageUrl;
            downloadLink.style.display = 'inline-block';
            
            // Show modal
            modal.style.display = 'flex';
            
            // Add error handling for image
            imageElement.onerror = function() {
                this.src = 'https://via.placeholder.com/600x400/1e293b/94a3b8?text=Image+Not+Found';
                this.alt = 'Image failed to load';
                metadataElement.innerHTML += '<div style="color: var(--error); margin-top: 0.5rem;"> Image failed to load</div>';
            };
        },

        closeImageModal() {
            const modal = document.getElementById('image-proof-modal');
            modal.style.display = 'none';
        },

        zoomImage(direction) {
            const image = document.getElementById('proof-image');
            
            if (direction === 'in') {
                this.state.currentImageScale = Math.min(this.state.currentImageScale + 0.25, 3);
            } else {
                this.state.currentImageScale = Math.max(this.state.currentImageScale - 0.25, 0.5);
            }
            
            image.style.transform = `scale(${this.state.currentImageScale}) rotate(${this.state.currentImageRotation}deg)`;
        },

        rotateImage() {
            const image = document.getElementById('proof-image');
            this.state.currentImageRotation = (this.state.currentImageRotation + 90) % 360;
            image.style.transform = `scale(${this.state.currentImageScale}) rotate(${this.state.currentImageRotation}deg)`;
        },

        resetImage() {
            const image = document.getElementById('proof-image');
            this.state.currentImageScale = 1;
            this.state.currentImageRotation = 0;
            image.style.transform = 'scale(1) rotate(0deg)';
        },

        downloadProofImage() {
            const image = document.getElementById('proof-image');
            const link = document.createElement('a');
            link.href = image.src;
            link.download = `proof-${Date.now()}.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            this.showToast('Image download started', 'success');
        },

        // ==================== ENHANCED CHART FUNCTIONS ====================
        createPlatformGrowthChart(stats) {
            const ctx = document.getElementById('platform-growth-chart');
            if (!ctx) return;
            
            // Destroy existing chart
            if (this.state.charts.platformGrowth) {
                this.state.charts.platformGrowth.destroy();
            }
            
            // Sample data - in real app, get from API
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const usersData = [100, 200, 350, 500, 750, 1000];
            const revenueData = [50000, 120000, 250000, 400000, 600000, 850000];
            
            this.state.charts.platformGrowth = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Total Users',
                            data: usersData,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Platform Revenue ()',
                            data: revenueData,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.datasetIndex === 0) {
                                        label += context.parsed.y + ' users';
                                    } else {
                                        label += '' + context.parsed.y.toLocaleString();
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                            },
                            ticks: {
                                color: '#94a3b8',
                                callback: function(value) {
                                    return '' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        },

        // ==================== ENHANCED UTILITY FUNCTIONS ====================
        logout() {
            this.state.currentUser = null;
            this.state.token = null;
            this.state.isAdmin = false;
            this.state.isSuperAdmin = false;
            this.state.isAuthenticated = false;
            localStorage.removeItem('raw_wealthy_token');
            this.showToast('You have been logged out.', 'info');
            this.showPage('home');
        },

        setLoadingState(buttonId, isLoading) {
            const button = document.getElementById(buttonId);
            if (!button) return;
            
            const buttonText = button.querySelector('.btn-text');
            const buttonLoading = button.querySelector('.btn-loading');
            
            if (isLoading) {
                button.disabled = true;
                if (buttonText) buttonText.style.display = 'none';
                if (buttonLoading) buttonLoading.style.display = 'block';
            } else {
                button.disabled = false;
                if (buttonText) buttonText.style.display = 'block';
                if (buttonLoading) buttonLoading.style.display = 'none';
            }
        },

        showLoadingSpinner(show) {
            const spinner = document.getElementById('loading-spinner');
            if (spinner) {
                spinner.style.display = show ? 'flex' : 'none';
            }
        },

        showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            if (!container) return;
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            let icon = 'info-circle';
            if (type === 'success') icon = 'check-circle';
            else if (type === 'error') icon = 'exclamation-circle';
            else if (type === 'warning') icon = 'exclamation-triangle';
            
            toast.innerHTML = `
                <i class="fas fa-${icon}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (toast.parentNode === container) {
                    container.removeChild(toast);
                }
            }, 3000);
        },

        // ==================== ENHANCED UI HELPERS ====================
        toggleTheme() {
            const body = document.body;
            const icon = document.querySelector('#theme-toggle i');
            
            if (body.classList.contains('light-mode')) {
                body.classList.remove('light-mode');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('theme', 'dark');
            } else {
                body.classList.add('light-mode');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('theme', 'light');
            }
        },

        openMobileMenu() {
            document.getElementById('mobile-menu').classList.add('active');
            document.getElementById('mobile-menu-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        },

        closeMobileMenu() {
            document.getElementById('mobile-menu').classList.remove('active');
            document.getElementById('mobile-menu-overlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        },

        handleScroll() {
            const navbar = document.querySelector('.navbar');
            const backToTop = document.getElementById('back-to-top');
            
            if (navbar && window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else if (navbar) {
                navbar.classList.remove('scrolled');
            }

            if (backToTop && window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else if (backToTop) {
                backToTop.classList.remove('visible');
            }
        },

        scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        },

        initPasswordToggles() {
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    const icon = this.querySelector('i');
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });
        },

        initFileUploadPreviews() {
            const fileInputs = [
                { input: 'investment-proof', preview: 'investment-preview' },
                { input: 'deposit-proof', preview: 'deposit-preview' },
                { input: 'id-front', preview: 'id-front-preview' },
                { input: 'id-back', preview: 'id-back-preview' },
                { input: 'selfie-with-id', preview: 'selfie-with-id-preview' }
            ];
            
            fileInputs.forEach(({ input, preview }) => {
                const inputElement = document.getElementById(input);
                const previewElement = document.getElementById(preview);
                
                if (inputElement && previewElement) {
                    inputElement.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                previewElement.src = e.target.result;
                                previewElement.style.display = 'block';
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                }
            });
        },

        setupImageErrorHandling() {
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelectorAll('img').forEach(img => {
                    img.addEventListener('error', function() {
                        console.error('Failed to load image:', this.src);
                    });
                });
            });
        },

        initAnimations() {
            // Intersection Observer for scroll animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            // Observe elements
            document.querySelectorAll('.feature, .plan-card, .step, .testimonial-card').forEach(el => {
                observer.observe(el);
            });
        },

        animateStats() {
            const stats = [
                { id: 'total-invested-stat', value: 2500000000, suffix: '+' },
                { id: 'active-investors-stat', value: 15240, suffix: '+' },
                { id: 'user-rating-stat', value: 4.9, suffix: '/5' }
            ];

            stats.forEach(stat => {
                const element = document.getElementById(stat.id);
                if (element) {
                    this.animateValue(element, 0, stat.value, 2000, stat.suffix);
                }
            });
        },

        animateValue(element, start, end, duration, suffix = '') {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                
                if (element.id === 'user-rating-stat') {
                    element.textContent = value.toFixed(1) + suffix;
                } else {
                    element.textContent = this.formatCurrency(value) + suffix;
                }
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        },

        formatCurrency(value) {
            if (value >= 1000000000) {
                return '' + (value / 1000000000).toFixed(1) + 'B';
            } else if (value >= 1000000) {
                return '' + (value / 1000000).toFixed(1) + 'M';
            } else if (value >= 1000) {
                return '' + (value / 1000).toFixed(1) + 'K';
            }
            return '' + value.toLocaleString();
        },

        // ==================== ENHANCED TAB SWITCHING ====================
        switchProfileTab(tab) {
            // Hide all tabs
            ['personal', 'security', 'bank', 'preferences', 'kyc'].forEach(tabId => {
                const element = document.getElementById(`${tabId}-tab`);
                if (element) element.style.display = 'none';
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.profile-nav a').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab and set active nav item
            const tabElement = document.getElementById(`${tab}-tab`);
            if (tabElement) {
                tabElement.style.display = 'block';
            }
            
            // Set active nav item
            const navItems = document.querySelectorAll('.profile-nav a');
            navItems.forEach(item => {
                if (item.textContent.includes(tab.charAt(0).toUpperCase() + tab.slice(1))) {
                    item.classList.add('active');
                }
            });
        },

        switchSupportCategory(category) {
            // Hide all categories
            ['faq', 'contact'].forEach(catId => {
                const element = document.getElementById(`${catId}-category`);
                if (element) element.style.display = 'none';
            });
            
            // Remove active class from all category items
            document.querySelectorAll('.support-category').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected category
            const categoryElement = document.getElementById(`${category}-category`);
            if (categoryElement) {
                categoryElement.style.display = 'block';
            }
            
            // Set active category item
            const categoryItems = document.querySelectorAll('.support-category');
            categoryItems.forEach(item => {
                if (item.textContent.includes(category.charAt(0).toUpperCase() + category.slice(1))) {
                    item.classList.add('active');
                }
            });
        },

        switchAdminTab(tab) {
            // Hide all tabs
            ['overview', 'users', 'investments', 'deposits', 'withdrawals', 'kyc', 'analytics'].forEach(tabId => {
                const element = document.getElementById(`${tabId}-tab`);
                if (element) element.style.display = 'none';
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.admin-nav a').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            const tabElement = document.getElementById(`${tab}-tab`);
            if (tabElement) {
                tabElement.style.display = 'block';
            }
            
            // Set active nav item
            const navItems = document.querySelectorAll('.admin-nav a');
            navItems.forEach(item => {
                if (item.textContent.includes(tab.charAt(0).toUpperCase() + tab.slice(1))) {
                    item.classList.add('active');
                }
            });
            
            // Load tab data
            if (tab === 'users') this.loadAdminUsers();
            if (tab === 'investments') this.loadAdminInvestments();
            if (tab === 'deposits') this.loadAdminDeposits();
            if (tab === 'withdrawals') this.loadAdminWithdrawals();
            if (tab === 'kyc') this.loadAdminKYC();
        },

        toggleFaq(element) {
            const faqItem = element.parentElement;
            faqItem.classList.toggle('active');
            
            const icon = element.querySelector('i');
            if (faqItem.classList.contains('active')) {
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        },

        // ==================== ENHANCED PAGE LOADING ====================
        async loadInvestmentHistory() {
            try {
                const response = await this.apiRequest('/investments?limit=50');
                const investments = response.data.investments || [];
                const container = document.getElementById('investment-history-container');
                
                if (container) {
                    if (investments.length === 0) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
                                <i class="fas fa-chart-line" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <h3>No Investment History</h3>
                                <p>You haven't made any investments yet.</p>
                                <button class="btn btn-primary" onclick="app.openModal('invest-modal')" style="margin-top: 1rem;">
                                    Make Your First Investment
                                </button>
                            </div>
                        `;
                    } else {
                        container.innerHTML = `
                            <div style="margin-bottom: 1.5rem;">
                                <input type="text" class="form-control" placeholder="Search investments..." 
                                       oninput="app.filterInvestments(this.value)" style="max-width: 300px;">
                            </div>
                            <div id="investment-history-list">
                                ${investments.map(inv => `
                                    <div class="investment-history-item" style="background: var(--secondary); padding: 1.5rem; border-radius: 10px; margin-bottom: 1rem;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                            <div>
                                                <h4 style="margin-bottom: 0.5rem;">${inv.plan?.name || 'Unknown Plan'}</h4>
                                                <div style="display: flex; gap: 1rem; font-size: 0.9rem; color: var(--text-muted);">
                                                    <span>Amount: <strong style="color: var(--accent-gold);">${inv.amount.toLocaleString()}</strong></span>
                                                    <span>Duration: ${inv.plan?.duration || 0} days</span>
                                                    <span>Daily: ${inv.plan?.daily_interest || 0}%</span>
                                                </div>
                                            </div>
                                            <span class="status-badge ${inv.status}">
                                                ${inv.status}
                                            </span>
                                        </div>
                                        
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                                            <div>
                                                <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">Start Date</p>
                                                <p style="font-weight: 500;">${new Date(inv.start_date).toLocaleDateString()}</p>
                                            </div>
                                            <div>
                                                <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">End Date</p>
                                                <p style="font-weight: 500;">${new Date(inv.end_date).toLocaleDateString()}</p>
                                            </div>
                                            <div>
                                                <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">Earned</p>
                                                <p style="font-weight: 500; color: var(--success);">${inv.earned_so_far?.toLocaleString() || '0'}</p>
                                            </div>
                                            <div>
                                                <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">Expected</p>
                                                <p style="font-weight: 500;">${inv.expected_earnings?.toLocaleString() || '0'}</p>
                                            </div>
                                        </div>
                                        
                                        ${inv.payment_proof_url ? `
                                            <div style="text-align: right;">
                                                <button class="btn btn-outline" 
                                                        onclick="app.viewProofImage('${inv.payment_proof_url}', 'Investment Proof - ${inv.plan?.name}')"
                                                        style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                                                    <i class="fas fa-image"></i> View Proof
                                                </button>
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('Failed to load investment history:', error);
            }
        },

        async loadTransactionHistory() {
            try {
                const response = await this.apiRequest('/transactions?limit=100');
                const transactions = response.data.transactions || [];
                const container = document.getElementById('transaction-history-container');
                
                if (container) {
                    if (transactions.length === 0) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
                                <i class="fas fa-exchange-alt" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <h3>No Transactions</h3>
                                <p>Your transaction history is empty.</p>
                            </div>
                        `;
                    } else {
                        container.innerHTML = `
                            <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                                <input type="text" class="form-control" placeholder="Search transactions..." 
                                       oninput="app.filterTransactions(this.value)" style="max-width: 300px;">
                                <select class="form-control" onchange="app.filterTransactionsByType(this.value)" style="max-width: 200px;">
                                    <option value="">All Types</option>
                                    <option value="deposit">Deposits</option>
                                    <option value="withdrawal">Withdrawals</option>
                                    <option value="investment">Investments</option>
                                    <option value="earning">Earnings</option>
                                    <option value="referral">Referrals</option>
                                    <option value="bonus">Bonuses</option>
                                </select>
                                <input type="date" class="form-control" onchange="app.filterTransactionsByDate(this.value)" style="max-width: 200px;">
                            </div>
                            <div id="transaction-history-list">
                                ${transactions.map(txn => `
                                    <div class="transaction-history-item" style="background: var(--secondary); padding: 1.5rem; border-radius: 10px; margin-bottom: 1rem;">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div style="display: flex; align-items: center; gap: 1rem;">
                                                <div style="width: 50px; height: 50px; border-radius: 50%; background: ${txn.type === 'deposit' ? 'var(--success)' : 
                                                                                                                   txn.type === 'withdrawal' ? 'var(--error)' : 
                                                                                                                   txn.type === 'investment' ? 'var(--warning)' : 
                                                                                                                   txn.type === 'earning' ? 'var(--accent-emerald)' : 
                                                                                                                   'var(--accent-blue)'}; 
                                                            display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                                    <i class="fas ${txn.type === 'deposit' ? 'fa-arrow-down' : 
                                                                   txn.type === 'withdrawal' ? 'fa-arrow-up' : 
                                                                   txn.type === 'investment' ? 'fa-chart-line' : 
                                                                   txn.type === 'earning' ? 'fa-coins' : 
                                                                   txn.type === 'referral' ? 'fa-user-friends' : 
                                                                   'fa-gift'}"></i>
                                                </div>
                                                <div>
                                                    <h4 style="margin-bottom: 0.2rem;">${txn.description}</h4>
                                                    <div style="display: flex; gap: 1rem; font-size: 0.9rem; color: var(--text-muted);">
                                                        <span>${txn.type}</span>
                                                        <span>${new Date(txn.createdAt).toLocaleString()}</span>
                                                        <span>Ref: ${txn.reference || 'N/A'}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="text-align: right;">
                                                <div style="font-size: 1.5rem; font-weight: bold; color: ${txn.amount > 0 ? 'var(--success)' : 'var(--accent-gold)'};">
                                                    ${txn.amount > 0 ? '+' : ''}${Math.abs(txn.amount).toLocaleString()}
                                                </div>
                                                <span class="status-badge ${txn.status}">
                                                    ${txn.status}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('Failed to load transaction history:', error);
            }
        },

        async loadKYCData() {
            if (!this.state.currentUser) return;
            
            try {
                const response = await this.apiRequest('/kyc/status');
                const kycData = response.data;
                const container = document.getElementById('kyc-data-container');
                
                if (container) {
                    if (kycData.kyc_submission) {
                        const kyc = kycData.kyc_submission;
                        container.innerHTML = `
                            <div style="background: var(--secondary); padding: 2rem; border-radius: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                    <h3>KYC Application Details</h3>
                                    <span class="status-badge ${kyc.status}">
                                        ${kyc.status}
                                    </span>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div>
                                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">ID Type</p>
                                        <p style="font-weight: 500;">${kyc.id_type}</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">ID Number</p>
                                        <p style="font-weight: 500;">${kyc.id_number}</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">Submitted</p>
                                        <p style="font-weight: 500;">${new Date(kyc.createdAt).toLocaleDateString()}</p>
                                    </div>
                                    <div>
                                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.2rem;">Last Updated</p>
                                        <p style="font-weight: 500;">${new Date(kyc.updatedAt).toLocaleDateString()}</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">ID Front</p>
                                        ${kyc.id_front_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.id_front_url}', 'ID Front')"
                                                style="width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">ID Back</p>
                                        ${kyc.id_back_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.id_back_url}', 'ID Back')"
                                                style="width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                    <div>
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">Selfie with ID</p>
                                        ${kyc.selfie_with_id_url ? 
                                            `<button class="btn btn-outline" 
                                                onclick="app.viewProofImage('${kyc.selfie_with_id_url}', 'Selfie with ID')"
                                                style="width: 100%;">
                                                <i class="fas fa-image"></i> View
                                            </button>` 
                                            : 'N/A'
                                        }
                                    </div>
                                </div>
                                
                                ${kyc.reviewed_by ? `
                                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                                        <p style="font-weight: 500; margin-bottom: 0.5rem;">Reviewed by Admin</p>
                                        <p style="font-size: 0.9rem; color: var(--text-muted);">
                                            ${kyc.notes || 'No notes provided'}
                                        </p>
                                        ${kyc.rejection_reason ? `
                                            <p style="color: var(--error); margin-top: 0.5rem;">
                                                <strong>Rejection Reason:</strong> ${kyc.rejection_reason}
                                            </p>
                                        ` : ''}
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    } else {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
                                <i class="fas fa-id-card" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <h3>No KYC Submission</h3>
                                <p>You haven't submitted any KYC documents yet.</p>
                                <button class="btn btn-primary" onclick="app.showPage('profile')" style="margin-top: 1rem;">
                                    Submit KYC Now
                                </button>
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('Failed to load KYC data:', error);
            }
        },

        // ==================== ENHANCED PASSWORD RESET ====================
        async handlePasswordReset(e) {
            e.preventDefault();
            
            const email = document.getElementById('reset-email').value.trim();
            
            if (!email) {
                this.showToast('Please enter your email address', 'error');
                return;
            }
            
            try {
                await this.apiRequest('/auth/forgot-password', {
                    method: 'POST',
                    body: { email }
                });
                
                this.showToast('Password reset instructions sent to your email', 'success');
                this.closeModal('password-reset-modal');
                
            } catch (error) {
                console.error('Password reset error:', error);
            }
        },

        // ==================== ENHANCED TWO-FACTOR AUTHENTICATION ====================
        enable2FA() {
            this.showToast('Two-factor authentication setup requires backend integration', 'info');
        },

        disable2FA() {
            this.showToast('Two-factor authentication management requires backend integration', 'info');
        }
    };

    // Initialize the application
    window.addEventListener('DOMContentLoaded', function() {
        app.init();
    });

    // Global function for smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Global error handler
    window.addEventListener('error', function(e) {
        console.error('Global error:', e.error);
    });

    // Page visibility handling
    document.addEventListener('visibilitychange', function() {
        if (document.visibilityState === 'visible' && app.state.isAuthenticated) {
            // Refresh data when page becomes visible again
            if (app.state.isAdmin && document.getElementById('admin-page').style.display === 'flex') {
                app.updateAdminDashboard();
            } else if (document.getElementById('dashboard-page').style.display === 'flex') {
                app.updateDashboard();
            }
        }
    });
</script>
</body>
    </html>
